import{x as ce,n as T,w as gi,y as wi,C as Mn,B as P,j as ee,k as V,z as Jt,s as rt,A as Qt,b as ne,f as Et,I as vi,o as ke,D as Y,i as ue,F as Te,G as Fe,H as ds,J as xi,g as _t,e as en,K as Ei,L as ls,M as Pi,N as fe,a as mt,O as tn,P as Ai,Q as Ae,R as re,S as Tt,T as Fn,U as wa,V as va,W as xa,X as Ea,Y as Pa,Z as Aa,_ as Ba,$ as Sa,a0 as zn,a1 as nn,a2 as Bi,a3 as Si,a4 as Ve,t as Ce,a5 as ps,a6 as Ii,a7 as ys,a8 as Ia,a9 as $i,aa as Oi,ab as ki,ac as Ti,ad as Ci,c as pt,ae as Ni,af as Gi,ag as bt,ah as Ne,ai as Gr,aj as Rr,ak as J,al as ms,am as Ri,an as _i,ao as Se,ap as bs,aq as Di,ar as hs,as as gs,at as Mi,p as ie,au as Ln,av as Fi,aw as $a,ax as ws,ay as zi,az as vs,aA as jn,aB as Li,aC as ji,aD as xs,aE as Ui,aF as _r,aG as ht,aH as Vi,m as Hi,aI as Es,aJ as Dr,aK as Mr,aL as qi,aM as Zi}from"./index-a9072a9b.js";const Wi={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function rn(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Ki(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>ce(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=T(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=T(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=T(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=T(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=T(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=T(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Wi[e.type]),typeof e.value<"u"&&(t.value=T(e.value)),t}function Ki(e){return e.map(t=>({address:t.address,r:t.r?T(BigInt(t.r)):t.r,s:t.s?T(BigInt(t.s)):t.s,chainId:T(t.chainId),nonce:T(t.nonce),...typeof t.yParity<"u"?{yParity:T(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:T(t.v)}:{}}))}function Ps(e,t="wei"){return gi(e,wi[t])}function ct({blockNumber:e,chain:t,contract:n}){var a;const r=(a=t==null?void 0:t.contracts)==null?void 0:a[n];if(!r)throw new Mn({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new Mn({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}class an extends P{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}const As={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Bs={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Yi={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function ye(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new ic(e.type);return`${e.name}(${sn(e.inputs,{includeName:t})})`}function sn(e,{includeName:t=!1}={}){return e?e.map(n=>Xi(n,{includeName:t})).join(t?", ":","):""}function Xi(e,{includeName:t}){return e.type.startsWith("tuple")?`(${sn(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}class Ji extends P{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class Oa extends P{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Ss extends P{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${sn(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Pt extends P{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Qi extends P{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class ec extends P{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ee(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Is extends P{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class tc extends P{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class ka extends P{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class $s extends P{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class nc extends P{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Os extends P{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Ta extends P{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class at extends P{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class ks extends P{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class rc extends P{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class ac extends P{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${ye(t.abiItem)}\`, and`,`\`${n.type}\` in \`${ye(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Ts=class extends P{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class gt extends P{constructor({abiItem:t,data:n,params:r,size:a}){super([`Data size of ${a} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${sn(r,{includeName:!0})})`,`Data:   ${n} (${a} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=a}}class on extends P{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ye(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class sc extends P{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class oc extends P{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Cs=class extends P{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class ic extends P{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class cc extends P{constructor(t){super(`Type "${t}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}const uc=e=>V(Jt(e));function fc(e){return uc(e)}const dc="1.0.8";let se=class Un extends Error{constructor(t,n={}){var o;const r=n.cause instanceof Un?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,a=n.cause instanceof Un&&n.cause.docsPath||n.docsPath,s=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${dc}`].join(`
`);super(s),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=a,this.metaMessages=n.metaMessages,this.shortMessage=t}};function $e(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const Ns=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Gs=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Rs=/^\(.+?\).*?$/,Ca=/^tuple(?<array>(\[(\d*)\])*)$/;function Vn(e){let t=e.type;if(Ca.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let a=0;a<n;a++){const s=e.components[a];t+=Vn(s),a<n-1&&(t+=", ")}const r=$e(Ca,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,Vn({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function dt(e){let t="";const n=e.length;for(let r=0;r<n;r++){const a=e[r];t+=Vn(a),r!==n-1&&(t+=", ")}return t}function Dt(e){var t;return e.type==="function"?`function ${e.name}(${dt(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${(t=e.outputs)!=null&&t.length?` returns (${dt(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${dt(e.inputs)})`:e.type==="error"?`error ${e.name}(${dt(e.inputs)})`:e.type==="constructor"?`constructor(${dt(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const _s=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function lc(e){return _s.test(e)}function pc(e){return $e(_s,e)}const Ds=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function yc(e){return Ds.test(e)}function mc(e){return $e(Ds,e)}const Ms=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function bc(e){return Ms.test(e)}function hc(e){return $e(Ms,e)}const Fs=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Fr(e){return Fs.test(e)}function gc(e){return $e(Fs,e)}const zs=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function wc(e){return zs.test(e)}function vc(e){return $e(zs,e)}const Ls=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function xc(e){return Ls.test(e)}function Ec(e){return $e(Ls,e)}const Pc=/^receive\(\) external payable$/;function Ac(e){return Pc.test(e)}const Bc=new Set(["indexed"]),Hn=new Set(["calldata","memory","storage"]);class Sc extends se{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Ic extends se{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class $c extends se{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Oc extends se{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class kc extends se{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Tc extends se{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Cc extends se{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Nc extends se{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ut extends se{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Gc extends se{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Rc extends se{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class _c extends se{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Dc extends se{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Mc(e,t,n){let r="";if(n)for(const a of Object.entries(n)){if(!a)continue;let s="";for(const o of a[1])s+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${a[0]}{${s}})`}return t?`${t}:${e}${r}`:e}const Bn=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function qn(e,t={}){if(bc(e))return Fc(e,t);if(yc(e))return zc(e,t);if(lc(e))return Lc(e,t);if(wc(e))return jc(e,t);if(xc(e))return Uc(e);if(Ac(e))return{type:"receive",stateMutability:"payable"};throw new Gc({signature:e})}function Fc(e,t={}){const n=hc(e);if(!n)throw new ut({signature:e,type:"function"});const r=le(n.parameters),a=[],s=r.length;for(let i=0;i<s;i++)a.push(Le(r[i],{modifiers:Hn,structs:t,type:"function"}));const o=[];if(n.returns){const i=le(n.returns),c=i.length;for(let u=0;u<c;u++)o.push(Le(i[u],{modifiers:Hn,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:a,outputs:o}}function zc(e,t={}){const n=mc(e);if(!n)throw new ut({signature:e,type:"event"});const r=le(n.parameters),a=[],s=r.length;for(let o=0;o<s;o++)a.push(Le(r[o],{modifiers:Bc,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:a}}function Lc(e,t={}){const n=pc(e);if(!n)throw new ut({signature:e,type:"error"});const r=le(n.parameters),a=[],s=r.length;for(let o=0;o<s;o++)a.push(Le(r[o],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:a}}function jc(e,t={}){const n=vc(e);if(!n)throw new ut({signature:e,type:"constructor"});const r=le(n.parameters),a=[],s=r.length;for(let o=0;o<s;o++)a.push(Le(r[o],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:a}}function Uc(e){const t=Ec(e);if(!t)throw new ut({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const Vc=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Hc=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,qc=/^u?int$/;function Le(e,t){var d,p;const n=Mc(e,t==null?void 0:t.type,t==null?void 0:t.structs);if(Bn.has(n))return Bn.get(n);const r=Rs.test(e),a=$e(r?Hc:Vc,e);if(!a)throw new Oc({param:e});if(a.name&&Wc(a.name))throw new kc({param:e,name:a.name});const s=a.name?{name:a.name}:{},o=a.modifier==="indexed"?{indexed:!0}:{},i=(t==null?void 0:t.structs)??{};let c,u={};if(r){c="tuple";const l=le(a.type),y=[],m=l.length;for(let b=0;b<m;b++)y.push(Le(l[b],{structs:i}));u={components:y}}else if(a.type in i)c="tuple",u={components:i[a.type]};else if(qc.test(a.type))c=`${a.type}256`;else if(c=a.type,(t==null?void 0:t.type)!=="struct"&&!js(c))throw new $c({type:c});if(a.modifier){if(!((p=(d=t==null?void 0:t.modifiers)==null?void 0:d.has)!=null&&p.call(d,a.modifier)))throw new Tc({param:e,type:t==null?void 0:t.type,modifier:a.modifier});if(Hn.has(a.modifier)&&!Kc(c,!!a.array))throw new Cc({param:e,type:t==null?void 0:t.type,modifier:a.modifier})}const f={type:`${c}${a.array??""}`,...s,...o,...u};return Bn.set(n,f),f}function le(e,t=[],n="",r=0){const a=e.trim().length;for(let s=0;s<a;s++){const o=e[s],i=e.slice(s+1);switch(o){case",":return r===0?le(i,[...t,n.trim()]):le(i,t,`${n}${o}`,r);case"(":return le(i,t,`${n}${o}`,r+1);case")":return le(i,t,`${n}${o}`,r-1);default:return le(i,t,`${n}${o}`,r)}}if(n==="")return t;if(r!==0)throw new Dc({current:n,depth:r});return t.push(n.trim()),t}function js(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Ns.test(e)||Gs.test(e)}const Zc=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Wc(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Ns.test(e)||Gs.test(e)||Zc.test(e)}function Kc(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function Us(e){const t={},n=e.length;for(let o=0;o<n;o++){const i=e[o];if(!Fr(i))continue;const c=gc(i);if(!c)throw new ut({signature:i,type:"struct"});const u=c.properties.split(";"),f=[],d=u.length;for(let p=0;p<d;p++){const y=u[p].trim();if(!y)continue;const m=Le(y,{type:"struct"});f.push(m)}if(!f.length)throw new Rc({signature:i});t[c.name]=f}const r={},a=Object.entries(t),s=a.length;for(let o=0;o<s;o++){const[i,c]=a[o];r[i]=Vs(c,t)}return r}const Yc=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Vs(e,t,n=new Set){const r=[],a=e.length;for(let s=0;s<a;s++){const o=e[s];if(Rs.test(o.type))r.push(o);else{const c=$e(Yc,o.type);if(!(c!=null&&c.type))throw new Nc({abiParameter:o});const{array:u,type:f}=c;if(f in t){if(n.has(f))throw new _c({type:f});r.push({...o,type:`tuple${u??""}`,components:Vs(t[f]??[],t,new Set([...n,f]))})}else if(js(f))r.push(o);else throw new Ic({type:f})}}return r}function zr(e){const t=Us(e),n=[],r=e.length;for(let a=0;a<r;a++){const s=e[a];Fr(s)||n.push(qn(s,t))}return n}function Na(e){let t;if(typeof e=="string")t=qn(e);else{const n=Us(e),r=e.length;for(let a=0;a<r;a++){const s=e[a];if(!Fr(s)){t=qn(s,n);break}}}if(!t)throw new Sc({signature:e});return t}function Xc(e){let t=!0,n="",r=0,a="",s=!1;for(let o=0;o<e.length;o++){const i=e[o];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function",""].includes(a))a="";else if(a+=i,i===")"){s=!0;break}continue}if(i===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}a+=i,n+=i}}if(!s)throw new P("Unable to normalize signature.");return a}const Jc=e=>{const t=(()=>typeof e=="string"?e:Dt(e))();return Xc(t)};function Hs(e){return fc(Jc(e))}const At=e=>rt(Hs(e),0,4);function Qc(e,t={}){typeof t.size<"u"&&Qt(e,{size:t.size});const n=ce(e,t);return ne(n,t)}function eu(e,t={}){let n=e;if(typeof t.size<"u"&&(Qt(n,{size:t.size}),n=Et(n)),n.length>1||n[0]>1)throw new vi(n);return!!n[0]}function Be(e,t={}){typeof t.size<"u"&&Qt(e,{size:t.size});const n=ce(e,t);return ke(n,t)}function tu(e,t={}){let n=e;return typeof t.size<"u"&&(Qt(n,{size:t.size}),n=Et(n,{dir:"right"})),new TextDecoder().decode(n)}const nu=/^(.*)\[([0-9]*)\]$/,qs=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Lr=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function pe(e,t){if(e.length!==t.length)throw new Is({expectedLength:e.length,givenLength:t.length});const n=ru({params:e,values:t}),r=Ur(n);return r.length===0?"0x":r}function ru({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(jr({param:e[r],value:t[r]}));return n}function jr({param:e,value:t}){const n=Vr(e.type);if(n){const[r,a]=n;return su(t,{length:r,param:{...e,type:a}})}if(e.type==="tuple")return fu(t,{param:e});if(e.type==="address")return au(t);if(e.type==="bool")return iu(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,a="256"]=Lr.exec(e.type)??[];return cu(t,{signed:r,size:Number(a)})}if(e.type.startsWith("bytes"))return ou(t,{param:e});if(e.type==="string")return uu(t);throw new sc(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Ur(e){let t=0;for(let s=0;s<e.length;s++){const{dynamic:o,encoded:i}=e[s];o?t+=32:t+=ee(i)}const n=[],r=[];let a=0;for(let s=0;s<e.length;s++){const{dynamic:o,encoded:i}=e[s];o?(n.push(T(t+a,{size:32})),r.push(i),a+=ee(i)):n.push(i)}return Y([...n,...r])}function au(e){if(!ue(e))throw new Te({address:e});return{dynamic:!1,encoded:Fe(e.toLowerCase())}}function su(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Cs(e);if(!r&&e.length!==t)throw new Qi({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let a=!1;const s=[];for(let o=0;o<e.length;o++){const i=jr({param:n,value:e[o]});i.dynamic&&(a=!0),s.push(i)}if(r||a){const o=Ur(s);if(r){const i=T(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?Y([i,o]):i}}if(a)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Y(s.map(({encoded:o})=>o))}}function ou(e,{param:t}){const[,n]=t.type.split("bytes"),r=ee(e);if(!n){let a=e;return r%32!==0&&(a=Fe(a,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Y([Fe(T(r,{size:32})),a])}}if(r!==Number.parseInt(n))throw new ec({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:Fe(e,{dir:"right"})}}function iu(e){if(typeof e!="boolean")throw new P(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Fe(ds(e))}}function cu(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,a=t?-r-1n:0n;if(e>r||e<a)throw new xi({max:r.toString(),min:a.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:T(e,{size:32,signed:t})}}function uu(e){const t=_t(e),n=Math.ceil(ee(t)/32),r=[];for(let a=0;a<n;a++)r.push(Fe(rt(t,a*32,(a+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Y([Fe(T(ee(t),{size:32})),...r])}}function fu(e,{param:t}){let n=!1;const r=[];for(let a=0;a<t.components.length;a++){const s=t.components[a],o=Array.isArray(e)?a:s.name,i=jr({param:s,value:e[o]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Ur(r):Y(r.map(({encoded:a})=>a))}}function Vr(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Bt(e,t){const n=typeof t=="string"?en(t):t,r=Ei(n);if(ee(n)===0&&e.length>0)throw new Pt;if(ee(t)&&ee(t)<32)throw new Ss({data:typeof t=="string"?t:ce(t),params:e,size:ee(t)});let a=0;const s=[];for(let o=0;o<e.length;++o){const i=e[o];r.setPosition(a);const[c,u]=tt(r,i,{staticPosition:0});a+=u,s.push(c)}return s}function tt(e,t,{staticPosition:n}){const r=Vr(t.type);if(r){const[a,s]=r;return lu(e,{...t,type:s},{length:a,staticPosition:n})}if(t.type==="tuple")return bu(e,t,{staticPosition:n});if(t.type==="address")return du(e);if(t.type==="bool")return pu(e);if(t.type.startsWith("bytes"))return yu(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return mu(e,t);if(t.type==="string")return hu(e,{staticPosition:n});throw new oc(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Ga=32,Zn=32;function du(e){const t=e.readBytes(32);return[ls(ce(Pi(t,-20))),32]}function lu(e,t,{length:n,staticPosition:r}){if(!n){const o=Be(e.readBytes(Zn)),i=r+o,c=i+Ga;e.setPosition(i);const u=Be(e.readBytes(Ga)),f=wt(t);let d=0;const p=[];for(let l=0;l<u;++l){e.setPosition(c+(f?l*32:d));const[y,m]=tt(e,t,{staticPosition:c});d+=m,p.push(y)}return e.setPosition(r+32),[p,32]}if(wt(t)){const o=Be(e.readBytes(Zn)),i=r+o,c=[];for(let u=0;u<n;++u){e.setPosition(i+u*32);const[f]=tt(e,t,{staticPosition:i});c.push(f)}return e.setPosition(r+32),[c,32]}let a=0;const s=[];for(let o=0;o<n;++o){const[i,c]=tt(e,t,{staticPosition:r+a});a+=c,s.push(i)}return[s,a]}function pu(e){return[eu(e.readBytes(32),{size:32}),32]}function yu(e,t,{staticPosition:n}){const[r,a]=t.type.split("bytes");if(!a){const o=Be(e.readBytes(32));e.setPosition(n+o);const i=Be(e.readBytes(32));if(i===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(i);return e.setPosition(n+32),[ce(c),32]}return[ce(e.readBytes(Number.parseInt(a),32)),32]}function mu(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),a=e.readBytes(32);return[r>48?Qc(a,{signed:n}):Be(a,{signed:n}),32]}function bu(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:o})=>!o),a=r?[]:{};let s=0;if(wt(t)){const o=Be(e.readBytes(Zn)),i=n+o;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(i+s);const[f,d]=tt(e,u,{staticPosition:i});s+=d,a[r?c:u==null?void 0:u.name]=f}return e.setPosition(n+32),[a,32]}for(let o=0;o<t.components.length;++o){const i=t.components[o],[c,u]=tt(e,i,{staticPosition:n});a[r?o:i==null?void 0:i.name]=c,s+=u}return[a,s]}function hu(e,{staticPosition:t}){const n=Be(e.readBytes(32)),r=t+n;e.setPosition(r);const a=Be(e.readBytes(32));if(a===0)return e.setPosition(t+32),["",32];const s=e.readBytes(a,32),o=tu(Et(s));return e.setPosition(t+32),[o,32]}function wt(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(wt);const n=Vr(e.type);return!!(n&&wt({...e,type:n[1]}))}function Zs(e){const{abi:t,data:n}=e,r=rt(n,0,4);if(r==="0x")throw new Pt;const s=[...t||[],Bs,Yi].find(o=>o.type==="error"&&r===At(ye(o)));if(!s)throw new $s(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Bt(s.inputs,rt(n,4)):void 0,errorName:s.name}}function Ws({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((a,s)=>`${r&&a.name?`${a.name}: `:""}${typeof t[s]=="object"?fe(t[s]):t[s]}`).join(", ")})`}const cn=Hs;function He(e){const{abi:t,args:n=[],name:r}=e,a=mt(r,{strict:!1}),s=t.filter(i=>a?i.type==="function"?At(i)===r:i.type==="event"?cn(i)===r:!1:"name"in i&&i.name===r);if(s.length===0)return;if(s.length===1)return s[0];let o;for(const i of s){if(!("inputs"in i))continue;if(!n||n.length===0){if(!i.inputs||i.inputs.length===0)return i;continue}if(!i.inputs||i.inputs.length===0||i.inputs.length!==n.length)continue;if(n.every((u,f)=>{const d="inputs"in i&&i.inputs[f];return d?Wn(u,d):!1})){if(o&&"inputs"in o&&o.inputs){const u=Ks(i.inputs,o.inputs,n);if(u)throw new ac({abiItem:i,type:u[0]},{abiItem:o,type:u[1]})}o=i}}return o||s[0]}function Wn(e,t){const n=typeof e,r=t.type;switch(r){case"address":return ue(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((a,s)=>Wn(Object.values(e)[s],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(a=>Wn(a,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Ks(e,t,n){for(const r in e){const a=e[r],s=t[r];if(a.type==="tuple"&&s.type==="tuple"&&"components"in a&&"components"in s)return Ks(a.components,s.components,n[r]);const o=[a.type,s.type];if((()=>o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?ue(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?ue(n[r],{strict:!1}):!1)())return o}}class gu extends P{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class wu extends P{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Ra(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function vu(e){return e.reduce((t,{address:n,...r})=>{let a=`${t}    ${n}:
`;return r.nonce&&(a+=`      nonce: ${r.nonce}
`),r.balance&&(a+=`      balance: ${r.balance}
`),r.code&&(a+=`      code: ${r.code}
`),r.state&&(a+=`      state:
`,a+=Ra(r.state)),r.stateDiff&&(a+=`      stateDiff:
`,a+=Ra(r.stateDiff)),a},`  State Override:
`).slice(0,-1)}class Ys extends P{constructor(t,{account:n,docsPath:r,chain:a,data:s,gas:o,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:d,value:p,stateOverride:l}){var b;const y=n?re(n):void 0;let m=tn({from:y==null?void 0:y.address,to:d,value:typeof p<"u"&&`${Ps(p)} ${((b=a==null?void 0:a.nativeCurrency)==null?void 0:b.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof i<"u"&&`${Ae(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ae(u)} gwei`,nonce:f});l&&(m+=`
${vu(l)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",m].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Xs extends P{constructor(t,{abi:n,args:r,contractAddress:a,docsPath:s,functionName:o,sender:i}){const c=He({abi:n,args:r,name:o}),u=c?Ws({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=c?ye(c,{includeName:!0}):void 0,d=tn({address:a&&Ai(a),function:f,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:i});super(t.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:t,docsPath:s,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=a,this.functionName=o,this.sender=i}}class Mt extends P{constructor({abi:t,data:n,functionName:r,message:a}){let s,o,i,c;if(n&&n!=="0x")try{o=Zs({abi:t,data:n});const{abiItem:f,errorName:d,args:p}=o;if(d==="Error")c=p[0];else if(d==="Panic"){const[l]=p;c=As[l]}else{const l=f?ye(f,{includeName:!0}):void 0,y=f&&p?Ws({abiItem:f,args:p,includeFunctionName:!1,includeName:!1}):void 0;i=[l?`Error: ${l}`:"",y&&y!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${y}`:""]}}catch(f){s=f}else a&&(c=a);let u;s instanceof $s&&(u=s.signature,i=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:s,metaMessages:i,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=u}}class Js extends P{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class xu extends P{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class un extends P{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}function Hr(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof P?e.walk(a=>(a==null?void 0:a.code)===Tt.code):e;return r instanceof P?new Tt({cause:e,message:r.details}):Tt.nodeMessage.test(n)?new Tt({cause:e,message:e.details}):Fn.nodeMessage.test(n)?new Fn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):wa.nodeMessage.test(n)?new wa({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):va.nodeMessage.test(n)?new va({cause:e,nonce:t==null?void 0:t.nonce}):xa.nodeMessage.test(n)?new xa({cause:e,nonce:t==null?void 0:t.nonce}):Ea.nodeMessage.test(n)?new Ea({cause:e,nonce:t==null?void 0:t.nonce}):Pa.nodeMessage.test(n)?new Pa({cause:e}):Aa.nodeMessage.test(n)?new Aa({cause:e,gas:t==null?void 0:t.gas}):Ba.nodeMessage.test(n)?new Ba({cause:e,gas:t==null?void 0:t.gas}):Sa.nodeMessage.test(n)?new Sa({cause:e}):zn.nodeMessage.test(n)?new zn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new nn({cause:e})}function Qs(e,{docsPath:t,...n}){const r=(()=>{const a=Hr(e,n);return a instanceof nn?e:a})();return new Ys(r,{docsPath:t,...n})}function qr(e,{format:t}){if(!t)return{};const n={};function r(s){const o=Object.keys(s);for(const i of o)i in e&&(n[i]=e[i]),s[i]&&typeof s[i]=="object"&&!Array.isArray(s[i])&&r(s[i])}const a=t(e||{});return r(a),n}function St(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:a,to:s}=e,o=t?re(t):void 0;if(o&&!ue(o.address))throw new Te({address:o.address});if(s&&!ue(s))throw new Te({address:s});if(typeof n<"u"&&(typeof r<"u"||typeof a<"u"))throw new Bi;if(r&&r>Si)throw new Fn({maxFeePerGas:r});if(a&&r&&a>r)throw new zn({maxFeePerGas:r,maxPriorityFeePerGas:a})}const Sn="/docs/contract/encodeDeployData";function Zr(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const a=t.find(o=>"type"in o&&o.type==="constructor");if(!a)throw new Ji({docsPath:Sn});if(!("inputs"in a))throw new Oa({docsPath:Sn});if(!a.inputs||a.inputs.length===0)throw new Oa({docsPath:Sn});const s=pe(a.inputs,n);return Ve([r,s])}function Eu(e){const t=V(`0x${e.substring(4)}`).substring(26);return ls(`0x${t}`)}async function Pu({hash:e,signature:t}){const n=mt(e)?e:Ce(e),{secp256k1:r}=await ps(()=>Promise.resolve().then(()=>Yl),void 0,import.meta.url);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:d,yParity:p}=t,l=Number(p??d),y=_a(l);return new r.Signature(ne(u),ne(f)).addRecoveryBit(y)}const o=mt(t)?t:Ce(t);if(ee(o)!==65)throw new Error("invalid signature length");const i=ke(`0x${o.slice(130)}`),c=_a(i);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function _a(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function eo({hash:e,signature:t}){return Eu(await Pu({hash:e,signature:t}))}function Au(e){const{chainId:t,nonce:n,to:r}=e,a=e.contractAddress??e.address,s=V(Ve(["0x05",Ii([t?T(t):"0x",a,n?T(n):"0x"])]));return r==="bytes"?en(s):s}async function Bu(e){const{authorization:t,signature:n}=e;return eo({hash:Au(t),signature:n??t})}function R(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const a=e[n];return typeof a=="function"?a:s=>t(e,s)}async function It(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return ke(t)}class Su extends P{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Wr extends P{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Iu extends P{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ae(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class to extends P{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}async function he(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:a}={}){var u,f,d;const s=a??!1,o=n!==void 0?T(n):void 0;let i=null;if(t?i=await e.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):i=await e.request({method:"eth_getBlockByNumber",params:[o||r,s]},{dedupe:!!o}),!i)throw new to({blockHash:t,blockNumber:n});return(((d=(f=(u=e.chain)==null?void 0:u.formatters)==null?void 0:f.block)==null?void 0:d.format)||ys)(i)}async function Kr(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function $u(e,t){return no(e,t)}async function no(e,t){var s,o;const{block:n,chain:r=e.chain,request:a}=t||{};try{const i=((s=r==null?void 0:r.fees)==null?void 0:s.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof i=="function"){const u=n||await R(e,he,"getBlock")({}),f=await i({block:u,client:e,request:a});if(f===null)throw new Error;return f}if(typeof i<"u")return i;const c=await e.request({method:"eth_maxPriorityFeePerGas"});return ne(c)}catch{const[i,c]=await Promise.all([n?Promise.resolve(n):R(e,he,"getBlock")({}),R(e,Kr,"getGasPrice")({})]);if(typeof i.baseFeePerGas!="bigint")throw new Wr;const u=c-i.baseFeePerGas;return u<0n?0n:u}}async function ro(e,t){return Kn(e,t)}async function Kn(e,t){var p,l;const{block:n,chain:r=e.chain,request:a,type:s="eip1559"}=t||{},o=await(async()=>{var y,m;return typeof((y=r==null?void 0:r.fees)==null?void 0:y.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:a}):((m=r==null?void 0:r.fees)==null?void 0:m.baseFeeMultiplier)??1.2})();if(o<1)throw new Su;const c=10**(((p=o.toString().split(".")[1])==null?void 0:p.length)??0),u=y=>y*BigInt(Math.ceil(o*c))/BigInt(c),f=n||await R(e,he,"getBlock")({});if(typeof((l=r==null?void 0:r.fees)==null?void 0:l.estimateFeesPerGas)=="function"){const y=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:a,type:s});if(y!==null)return y}if(s==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new Wr;const y=typeof(a==null?void 0:a.maxPriorityFeePerGas)=="bigint"?a.maxPriorityFeePerGas:await no(e,{block:f,chain:r,request:a}),m=u(f.baseFeePerGas);return{maxFeePerGas:(a==null?void 0:a.maxFeePerGas)??m+y,maxPriorityFeePerGas:y}}return{gasPrice:(a==null?void 0:a.gasPrice)??u(await R(e,Kr,"getGasPrice")({}))}}class Ou extends P{constructor(t,{account:n,docsPath:r,chain:a,data:s,gas:o,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,to:d,value:p}){var y;const l=tn({from:n==null?void 0:n.address,to:d,value:typeof p<"u"&&`${Ps(p)} ${((y=a==null?void 0:a.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:s,gas:o,gasPrice:typeof i<"u"&&`${Ae(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ae(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",l].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function ku(e,{docsPath:t,...n}){const r=(()=>{const a=Hr(e,n);return a instanceof nn?e:a})();return new Ou(r,{docsPath:t,...n})}function Da(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Ia({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Ia({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Tu(e){const{balance:t,nonce:n,state:r,stateDiff:a,code:s}=e,o={};if(s!==void 0&&(o.code=s),t!==void 0&&(o.balance=T(t)),n!==void 0&&(o.nonce=T(n)),r!==void 0&&(o.state=Da(r)),a!==void 0){if(o.state)throw new wu;o.stateDiff=Da(a)}return o}function fn(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!ue(n,{strict:!1}))throw new Te({address:n});if(t[n])throw new gu({address:n});t[n]=Tu(r)}return t}async function ao(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const a=typeof n=="bigint"?T(n):void 0,s=await e.request({method:"eth_getBalance",params:[t,a||r]});return BigInt(s)}async function Yr(e,t){var a,s,o;const{account:n=e.account}=t,r=n?re(n):void 0;try{let C=function(G){const{block:_,request:E,rpcStateOverride:M}=G;return e.request({method:"eth_estimateGas",params:M?[E,_??e.experimental_blockTag??"latest",M]:_?[E,_]:[E]})};const{accessList:i,authorizationList:c,blobs:u,blobVersionedHashes:f,blockNumber:d,blockTag:p,data:l,gas:y,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:g,maxPriorityFeePerGas:w,nonce:x,value:$,stateOverride:I,...D}=await so(e,{...t,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),A=(typeof d=="bigint"?T(d):void 0)||p,h=fn(I),k=await(async()=>{if(D.to)return D.to;if(c&&c.length>0)return await Bu({authorization:c[0]}).catch(()=>{throw new P("`to` is required. Could not infer from `authorizationList`")})})();St(t);const v=(o=(s=(a=e.chain)==null?void 0:a.formatters)==null?void 0:s.transactionRequest)==null?void 0:o.format,O=(v||rn)({...qr(D,{format:v}),from:r==null?void 0:r.address,accessList:i,authorizationList:c,blobs:u,blobVersionedHashes:f,data:l,gas:y,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:g,maxPriorityFeePerGas:w,nonce:x,to:k,value:$});let N=BigInt(await C({block:A,request:O,rpcStateOverride:h}));if(c){const G=await ao(e,{address:O.from}),_=await Promise.all(c.map(async E=>{const{address:M}=E,z=await C({block:A,request:{authorizationList:void 0,data:l,from:r==null?void 0:r.address,to:M,value:T(G)},rpcStateOverride:h}).catch(()=>100000n);return 2n*BigInt(z)}));N+=_.reduce((E,M)=>E+M,0n)}return N}catch(i){throw ku(i,{...t,account:r,chain:e.chain})}}async function Xr(e,{address:t,blockTag:n="latest",blockNumber:r}){const a=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?T(r):n]},{dedupe:!!r});return ke(a)}const Cu=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Ma=new Map;async function so(e,t){const{account:n=e.account,blobs:r,chain:a,gas:s,kzg:o,nonce:i,nonceManager:c,parameters:u=Cu,type:f}=t,d=n&&re(n),p={...t,...d?{from:d==null?void 0:d.address}:{}};let l;async function y(){return l||(l=await R(e,he,"getBlock")({blockTag:"latest"}),l)}let m;async function b(){return m||(a?a.id:typeof t.chainId<"u"?t.chainId:(m=await R(e,It,"getChainId")({}),m))}if(u.includes("nonce")&&typeof i>"u"&&d)if(c){const g=await b();p.nonce=await c.consume({address:d.address,chainId:g,client:e})}else p.nonce=await R(e,Xr,"getTransactionCount")({address:d.address,blockTag:"pending"});if((u.includes("blobVersionedHashes")||u.includes("sidecars"))&&r&&o){const g=$i({blobs:r,kzg:o});if(u.includes("blobVersionedHashes")){const w=Oi({commitments:g,to:"hex"});p.blobVersionedHashes=w}if(u.includes("sidecars")){const w=ki({blobs:r,commitments:g,kzg:o}),x=Ti({blobs:r,commitments:g,proofs:w,to:"hex"});p.sidecars=x}}if(u.includes("chainId")&&(p.chainId=await b()),(u.includes("fees")||u.includes("type"))&&typeof f>"u")try{p.type=Ci(p)}catch{let g=Ma.get(e.uid);if(typeof g>"u"){const w=await y();g=typeof(w==null?void 0:w.baseFeePerGas)=="bigint",Ma.set(e.uid,g)}p.type=g?"eip1559":"legacy"}if(u.includes("fees"))if(p.type!=="legacy"&&p.type!=="eip2930"){if(typeof p.maxFeePerGas>"u"||typeof p.maxPriorityFeePerGas>"u"){const g=await y(),{maxFeePerGas:w,maxPriorityFeePerGas:x}=await Kn(e,{block:g,chain:a,request:p});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<x)throw new Iu({maxPriorityFeePerGas:x});p.maxPriorityFeePerGas=x,p.maxFeePerGas=w}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Wr;if(typeof t.gasPrice>"u"){const g=await y(),{gasPrice:w}=await Kn(e,{block:g,chain:a,request:p,type:"legacy"});p.gasPrice=w}}return u.includes("gas")&&typeof s>"u"&&(p.gas=await R(e,Yr,"estimateGas")({...p,account:d&&{address:d.address,type:"json-rpc"}})),St(p),delete p.parameters,p}async function Nu(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const Yn=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Xn=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],oo=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],io=[...oo,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Gu=[...oo,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Fa=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],za=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],La=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],D0=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],In="/docs/contract/decodeFunctionResult";function qe(e){const{abi:t,args:n,functionName:r,data:a}=e;let s=t[0];if(r){const i=He({abi:t,args:n,name:r});if(!i)throw new at(r,{docsPath:In});s=i}if(s.type!=="function")throw new at(void 0,{docsPath:In});if(!s.outputs)throw new ks(s.name,{docsPath:In});const o=Bt(s.outputs,a);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const ja="/docs/contract/encodeFunctionData";function Ru(e){const{abi:t,args:n,functionName:r}=e;let a=t[0];if(r){const s=He({abi:t,args:n,name:r});if(!s)throw new at(r,{docsPath:ja});a=s}if(a.type!=="function")throw new at(void 0,{docsPath:ja});return{abi:[a],functionName:At(ye(a))}}function me(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var i;return e.abi.length===1&&((i=e.functionName)!=null&&i.startsWith("0x"))?e:Ru(e)})(),a=n[0],s=r,o="inputs"in a&&a.inputs?pe(a.inputs,t??[]):void 0;return Ve([s,o??"0x"])}function Jr(e,t){var r,a,s,o,i,c;if(!(e instanceof P))return!1;const n=e.walk(u=>u instanceof Mt);return n instanceof Mt?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((a=n.data)==null?void 0:a.errorName)==="ResolverWildcardNotSupported"||((s=n.data)==null?void 0:s.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((i=n.data)==null?void 0:i.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===As[50]):!1}function _u(e){const{abi:t,data:n}=e,r=rt(n,0,4),a=t.find(s=>s.type==="function"&&r===At(ye(s)));if(!a)throw new rc(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:a.name,args:"inputs"in a&&a.inputs&&a.inputs.length>0?Bt(a.inputs,rt(n,4)):void 0}}const $n="/docs/contract/encodeErrorResult";function Ua(e){const{abi:t,errorName:n,args:r}=e;let a=t[0];if(n){const c=He({abi:t,args:r,name:n});if(!c)throw new ka(n,{docsPath:$n});a=c}if(a.type!=="error")throw new ka(void 0,{docsPath:$n});const s=ye(a),o=At(s);let i="0x";if(r&&r.length>0){if(!a.inputs)throw new tc(a.name,{docsPath:$n});i=pe(a.inputs,r)}return Ve([o,i])}const On="/docs/contract/encodeFunctionResult";function Du(e){const{abi:t,functionName:n,result:r}=e;let a=t[0];if(n){const o=He({abi:t,name:n});if(!o)throw new at(n,{docsPath:On});a=o}if(a.type!=="function")throw new at(void 0,{docsPath:On});if(!a.outputs)throw new ks(a.name,{docsPath:On});const s=(()=>{if(a.outputs.length===0)return[];if(a.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Cs(r)})();return pe(a.outputs,s)}const Qr="x-batch-gateway:true";async function Mu(e){const{data:t,ccipRequest:n}=e,{args:[r]}=_u({abi:Xn,data:t}),a=[],s=[];return await Promise.all(r.map(async(o,i)=>{try{s[i]=o.urls.includes(Qr)?await Mu({data:o.data,ccipRequest:n}):await n(o),a[i]=!1}catch(c){a[i]=!0,s[i]=Fu(c)}})),Du({abi:Xn,functionName:"query",result:[a,s]})}function Fu(e){return e.name==="HttpRequestError"&&e.status?Ua({abi:Xn,errorName:"HttpError",args:[e.status,e.shortMessage]}):Ua({abi:[Bs],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function co(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return mt(t)?t:null}function Nt(e){let t=new Uint8Array(32).fill(0);if(!e)return ce(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const a=co(n[r]),s=a?Jt(a):V(pt(n[r]),"bytes");t=V(Y([t,s]),"bytes")}return ce(t)}function zu(e){return`[${e.slice(2)}]`}function Lu(e){const t=new Uint8Array(32).fill(0);return e?co(e)||V(pt(e)):ce(t)}function dn(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(pt(t).byteLength+2);let r=0;const a=t.split(".");for(let s=0;s<a.length;s++){let o=pt(a[s]);o.byteLength>255&&(o=pt(zu(Lu(a[s])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const ju=3;function st(e,{abi:t,address:n,args:r,docsPath:a,functionName:s,sender:o}){const i=e instanceof un?e:e instanceof P?e.walk(y=>"data"in y)||e.walk():{},{code:c,data:u,details:f,message:d,shortMessage:p}=i,l=(()=>e instanceof Pt?new Js({functionName:s}):[ju,Ni.code].includes(c)&&(u||f||d||p)?new Mt({abi:t,data:typeof u=="object"?u.data:u,functionName:s,message:i instanceof Gi?f:p??d}):e)();return new Xs(l,{abi:t,args:r,contractAddress:n,docsPath:a,functionName:s,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ea=BigInt(0),Jn=BigInt(1);function Ft(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Ct(e){const t=e.toString(16);return t.length&1?"0"+t:t}function uo(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?ea:BigInt("0x"+e)}function Ze(e){return uo(bt(e))}function fo(e){return Ne(e),uo(bt(Uint8Array.from(e).reverse()))}function $t(e,t){return Gr(e.toString(16).padStart(t*2,"0"))}function lo(e,t){return $t(e,t).reverse()}function W(e,t,n){let r;if(typeof t=="string")try{r=Gr(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else if(Rr(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const a=r.length;if(typeof n=="number"&&a!==n)throw new Error(e+" of length "+n+" expected, got "+a);return r}const kn=e=>typeof e=="bigint"&&ea<=e;function Qn(e,t,n){return kn(e)&&kn(t)&&kn(n)&&t<=e&&e<n}function po(e,t,n,r){if(!Qn(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Uu(e){let t;for(t=0;e>ea;e>>=Jn,t+=1);return t}const ln=e=>(Jn<<BigInt(e))-Jn;function Vu(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=l=>new Uint8Array(l),a=l=>Uint8Array.of(l);let s=r(e),o=r(e),i=0;const c=()=>{s.fill(1),o.fill(0),i=0},u=(...l)=>n(o,s,...l),f=(l=r(0))=>{o=u(a(0),l),s=u(),l.length!==0&&(o=u(a(1),l),s=u())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const y=[];for(;l<t;){s=u();const m=s.slice();y.push(m),l+=s.length}return J(...y)};return(l,y)=>{c(),f(l);let m;for(;!(m=y(d()));)f();return c(),m}}function Hu(e){return typeof e=="function"&&Number.isSafeInteger(e.outputLen)}function pn(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(a,s,o){const i=e[a];if(o&&i===void 0)return;const c=typeof i;if(c!==s||i===null)throw new Error(`param "${a}" is invalid: expected ${s}, got ${c}`)}Object.entries(t).forEach(([a,s])=>r(a,s,!1)),Object.entries(n).forEach(([a,s])=>r(a,s,!0))}function Va(e){const t=new WeakMap;return(n,...r)=>{const a=t.get(n);if(a!==void 0)return a;const s=e(n,...r);return t.set(n,s),s}}const qu="0.1.1";function Zu(){return qu}class H extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof H){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),a=(()=>n.cause instanceof H&&n.cause.docsPath||n.docsPath)(),o=`https://oxlib.sh${a??""}`,i=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a?["",r?`Details: ${r}`:void 0,a?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Zu()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=a,this.shortMessage=t}walk(t){return yo(this,t)}}function yo(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?yo(e.cause,t):t?null:e}const Wu="#__bigint";function Ku(e,t,n){return JSON.stringify(e,(r,a)=>typeof t=="function"?t(r,a):typeof a=="bigint"?a.toString()+Wu:a,n)}function Yu(e,t){if(qa(e)>t)throw new of({givenSize:qa(e),maxSize:t})}const xe={zero:48,nine:57,A:65,F:70,a:97,f:102};function Ha(e){if(e>=xe.zero&&e<=xe.nine)return e-xe.zero;if(e>=xe.A&&e<=xe.F)return e-(xe.A-10);if(e>=xe.a&&e<=xe.f)return e-(xe.a-10)}function Xu(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new cf({size:e.length,targetSize:r,type:"Bytes"});const a=new Uint8Array(r);for(let s=0;s<r;s++){const o=n==="right";a[o?s:r-s-1]=e[o?s:e.length-s-1]}return a}function ta(e,t){if(de(e)>t)throw new pf({givenSize:de(e),maxSize:t})}function Ju(e,t){if(typeof t=="number"&&t>0&&t>de(e)-1)throw new wo({offset:t,position:"start",size:de(e)})}function Qu(e,t,n){if(typeof t=="number"&&typeof n=="number"&&de(e)!==n-t)throw new wo({offset:n,position:"end",size:de(e)})}function mo(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const a=e.replace("0x","");if(a.length>r*2)throw new yf({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const ef=new TextEncoder;function tf(e){return e instanceof Uint8Array?e:typeof e=="string"?rf(e):nf(e)}function nf(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function rf(e,t={}){const{size:n}=t;let r=e;n&&(ta(e,n),r=Ue(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);const s=a.length/2,o=new Uint8Array(s);for(let i=0,c=0;i<s;i++){const u=Ha(a.charCodeAt(c++)),f=Ha(a.charCodeAt(c++));if(u===void 0||f===void 0)throw new H(`Invalid byte sequence ("${a[c-2]}${a[c-1]}" in "${a}").`);o[i]=u*16+f}return o}function af(e,t={}){const{size:n}=t,r=ef.encode(e);return typeof n=="number"?(Yu(r,n),sf(r,n)):r}function sf(e,t){return Xu(e,{dir:"right",size:t})}function qa(e){return e.length}let of=class extends H{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},cf=class extends H{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const uf=new TextEncoder,ff=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function df(e,t={}){const{strict:n=!1}=t;if(!e)throw new Za(e);if(typeof e!="string")throw new Za(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Wa(e);if(!e.startsWith("0x"))throw new Wa(e)}function ge(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function bo(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ta(n,t.size),je(n,t.size)):n}function ho(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=ff[e[a]];const r=`0x${n}`;return typeof t.size=="number"?(ta(r,t.size),Ue(r,t.size)):r}function Q(e,t={}){const{signed:n,size:r}=t,a=BigInt(e);let s;r?n?s=(1n<<BigInt(r)*8n-1n)-1n:s=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&n?-s-1n:0;if(s&&a>s||a<o){const u=typeof e=="bigint"?"n":"";throw new go({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?je(c,r):c}function na(e,t={}){return ho(uf.encode(e),t)}function je(e,t){return mo(e,{dir:"left",size:t})}function Ue(e,t){return mo(e,{dir:"right",size:t})}function ra(e,t,n,r={}){const{strict:a}=r;Ju(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&Qu(s,t,n),s}function de(e){return Math.ceil((e.length-2)/2)}function lf(e,t={}){const{strict:n=!1}=t;try{return df(e,{strict:n}),!0}catch{return!1}}class go extends H{constructor({max:t,min:n,signed:r,size:a,value:s}){super(`Number \`${s}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Za extends H{constructor(t){super(`Value \`${typeof t=="object"?Ku(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Wa extends H{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class pf extends H{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class wo extends H{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class yf extends H{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function mf(e){return{address:e.address,amount:Q(e.amount),index:Q(e.index),validatorIndex:Q(e.validatorIndex)}}function vo(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:Q(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:Q(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:Q(e.gasLimit)},...typeof e.number=="bigint"&&{number:Q(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:Q(e.prevRandao)},...typeof e.time=="bigint"&&{time:Q(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(mf)}}}const bf="0x82ad56cb",xo="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",hf="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",gf="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";async function yn(e,t){var O,C,N,G;const{account:n=e.account,authorizationList:r,batch:a=!!((O=e.batch)!=null&&O.multicall),blockNumber:s,blockTag:o=e.experimental_blockTag??"latest",accessList:i,blobs:c,blockOverrides:u,code:f,data:d,factory:p,factoryData:l,gas:y,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:g,maxPriorityFeePerGas:w,nonce:x,to:$,value:I,stateOverride:D,...S}=t,A=n?re(n):void 0;if(f&&(p||l))throw new P("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(f&&$)throw new P("Cannot provide both `code` & `to` as parameters.");const h=f&&d,k=p&&l&&$&&d,v=h||k,B=(()=>h?xf({code:f,data:d}):k?Ef({data:d,factory:p,factoryData:l,to:$}):d)();try{St(t);const E=(typeof s=="bigint"?T(s):void 0)||o,M=u?vo(u):void 0,z=fn(D),F=(G=(N=(C=e.chain)==null?void 0:C.formatters)==null?void 0:N.transactionRequest)==null?void 0:G.format,j=(F||rn)({...qr(S,{format:F}),from:A==null?void 0:A.address,accessList:i,authorizationList:r,blobs:c,data:B,gas:y,gasPrice:m,maxFeePerBlobGas:b,maxFeePerGas:g,maxPriorityFeePerGas:w,nonce:x,to:v?void 0:$,value:I});if(a&&wf({request:j})&&!z&&!M)try{return await vf(e,{...j,blockNumber:s,blockTag:o})}catch(U){if(!(U instanceof ms)&&!(U instanceof Mn))throw U}const Z=(()=>{const U=[j,E];return z&&M?[...U,z,M]:z?[...U,z]:M?[...U,{},M]:U})(),L=await e.request({method:"eth_call",params:Z});return L==="0x"?{data:void 0}:{data:L}}catch(_){const E=Pf(_),{offchainLookup:M,offchainLookupSignature:z}=await ps(()=>import("./ccip-8637f8b3.js"),["./ccip-8637f8b3.js","./index-a9072a9b.js","./vendor-e72fc605.js","./icons-17698402.js","./index-61d3289a.css"],import.meta.url);if(e.ccipRead!==!1&&(E==null?void 0:E.slice(0,10))===z&&$)return{data:await M(e,{data:E,to:$})};throw v&&(E==null?void 0:E.slice(0,10))==="0x101bb98d"?new xu({factory:p}):Qs(_,{...t,account:A,chain:e.chain})}}function wf({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(bf)||!n||Object.values(r).filter(a=>typeof a<"u").length>0)}async function vf(e,t){var m;const{batchSize:n=1024,wait:r=0}=typeof((m=e.batch)==null?void 0:m.multicall)=="object"?e.batch.multicall:{},{blockNumber:a,blockTag:s=e.experimental_blockTag??"latest",data:o,multicallAddress:i,to:c}=t;let u=i;if(!u){if(!e.chain)throw new ms;u=ct({blockNumber:a,chain:e.chain,contract:"multicall3"})}const d=(typeof a=="bigint"?T(a):void 0)||s,{schedule:p}=Ri({id:`${e.uid}.${d}`,wait:r,shouldSplitBatch(b){return b.reduce((w,{data:x})=>w+(x.length-2),0)>n*2},fn:async b=>{const g=b.map($=>({allowFailure:!0,callData:$.data,target:$.to})),w=me({abi:Yn,args:[g],functionName:"aggregate3"}),x=await e.request({method:"eth_call",params:[{data:w,to:u},d]});return qe({abi:Yn,args:[g],functionName:"aggregate3",data:x||"0x"})}}),[{returnData:l,success:y}]=await p({data:o,to:c});if(!y)throw new un({data:l});return l==="0x"?{data:void 0}:{data:l}}function xf(e){const{code:t,data:n}=e;return Zr({abi:zr(["constructor(bytes, bytes)"]),bytecode:xo,args:[t,n]})}function Ef(e){const{data:t,factory:n,factoryData:r,to:a}=e;return Zr({abi:zr(["constructor(address, bytes, address, bytes)"]),bytecode:hf,args:[a,t,n,r]})}function Pf(e){var n;if(!(e instanceof P))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function we(e,t){const{abi:n,address:r,args:a,functionName:s,...o}=t,i=me({abi:n,args:a,functionName:s});try{const{data:c}=await R(e,yn,"call")({...o,data:i,to:r});return qe({abi:n,args:a,functionName:s,data:c||"0x"})}catch(c){throw st(c,{abi:n,address:r,args:a,docsPath:"/docs/contract/readContract",functionName:s})}}async function Af(e,t){const{blockNumber:n,blockTag:r,coinType:a,name:s,gatewayUrls:o,strict:i}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return ct({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),f=c==null?void 0:c.ensTlds;if(f&&!f.some(d=>s.endsWith(d)))return null;try{const d=me({abi:za,functionName:"addr",...a!=null?{args:[Nt(s),BigInt(a)]}:{args:[Nt(s)]}}),p={address:u,abi:io,functionName:"resolve",args:[Ce(dn(s)),d,o??[Qr]],blockNumber:n,blockTag:r},y=await R(e,we,"readContract")(p);if(y[0]==="0x")return null;const m=qe({abi:za,args:a!=null?[Nt(s),BigInt(a)]:void 0,functionName:"addr",data:y[0]});return m==="0x"||Et(m)==="0x00"?null:m}catch(d){if(i)throw d;if(Jr(d,"resolve"))return null;throw d}}class Bf extends P{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class lt extends P{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class aa extends P{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Sf extends P{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const If=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,$f=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Of=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,kf=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Tf(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Ka(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Eo({uri:e,gatewayUrls:t}){const n=Of.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Ka(t==null?void 0:t.ipfs,"https://ipfs.io"),a=Ka(t==null?void 0:t.arweave,"https://arweave.net"),s=e.match(If),{protocol:o,subpath:i,target:c,subtarget:u=""}=(s==null?void 0:s.groups)||{},f=o==="ipns:/"||i==="ipns/",d=o==="ipfs:/"||i==="ipfs/"||$f.test(e);if(e.startsWith("http")&&!f&&!d){let l=e;return t!=null&&t.arweave&&(l=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:l,isOnChain:!1,isEncoded:!1}}if((f||d)&&c)return{uri:`${r}/${f?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${a}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let p=e.replace(kf,"");if(p.startsWith("<svg")&&(p=`data:image/svg+xml;base64,${btoa(p)}`),p.startsWith("data:")||p.startsWith("{"))return{uri:p,isOnChain:!0,isEncoded:!1};throw new aa({uri:e})}function Po(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Bf({data:e});return e.image||e.image_url||e.image_data}async function Cf({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(a=>a.json());return await sa({gatewayUrls:e,uri:Po(n)})}catch{throw new aa({uri:t})}}async function sa({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Eo({uri:t,gatewayUrls:e});if(r||await Tf(n))return n;throw new aa({uri:t})}function Nf(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,a]=t.split("/"),[s,o]=n.split(":"),[i,c]=r.split(":");if(!s||s.toLowerCase()!=="eip155")throw new lt({reason:"Only EIP-155 supported"});if(!o)throw new lt({reason:"Chain ID not found"});if(!c)throw new lt({reason:"Contract address not found"});if(!a)throw new lt({reason:"Token ID not found"});if(!i)throw new lt({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:i.toLowerCase(),contractAddress:c,tokenID:a}}async function Gf(e,{nft:t}){if(t.namespace==="erc721")return we(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return we(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Sf({namespace:t.namespace})}async function Rf(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?_f(e,{gatewayUrls:t,record:n}):sa({uri:n,gatewayUrls:t})}async function _f(e,{gatewayUrls:t,record:n}){const r=Nf(n),a=await Gf(e,{nft:r}),{uri:s,isOnChain:o,isEncoded:i}=Eo({uri:a,gatewayUrls:t});if(o&&(s.includes("data:application/json;base64,")||s.startsWith("{"))){const u=i?atob(s.replace("data:application/json;base64,","")):s,f=JSON.parse(u);return sa({uri:Po(f),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Cf({gatewayUrls:t,uri:s.replace(/(?:0x)?{id}/,c)})}async function Ao(e,t){const{blockNumber:n,blockTag:r,key:a,name:s,gatewayUrls:o,strict:i}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return ct({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),f=c==null?void 0:c.ensTlds;if(f&&!f.some(d=>s.endsWith(d)))return null;try{const d={address:u,abi:io,functionName:"resolve",args:[Ce(dn(s)),me({abi:Fa,functionName:"text",args:[Nt(s),a]}),o??[Qr]],blockNumber:n,blockTag:r},l=await R(e,we,"readContract")(d);if(l[0]==="0x")return null;const y=qe({abi:Fa,functionName:"text",data:l[0]});return y===""?null:y}catch(d){if(i)throw d;if(Jr(d,"resolve"))return null;throw d}}async function Df(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:a,gatewayUrls:s,strict:o,universalResolverAddress:i}){const c=await R(e,Ao,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:a,universalResolverAddress:i,gatewayUrls:s,strict:o});if(!c)return null;try{return await Rf(e,{record:c,gatewayUrls:r})}catch{return null}}async function Mf(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:a,strict:s,universalResolverAddress:o}){let i=o;if(!i){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");i=ct({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const c=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const u={address:i,abi:Gu,functionName:"reverse",args:[Ce(dn(c))],blockNumber:n,blockTag:r},f=R(e,we,"readContract"),[d,p]=a?await f({...u,args:[...u.args,a]}):await f(u);return t.toLowerCase()!==p.toLowerCase()?null:d}catch(u){if(s)throw u;if(Jr(u,"reverse"))return null;throw u}}async function Ff(e,t){const{blockNumber:n,blockTag:r,name:a}=t,{chain:s}=e,o=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!s)throw new Error("client chain not configured. universalResolverAddress is required.");return ct({blockNumber:n,chain:s,contract:"ensUniversalResolver"})})(),i=s==null?void 0:s.ensTlds;if(i&&!i.some(u=>a.endsWith(u)))throw new Error(`${a} is not a valid ENS TLD (${i==null?void 0:i.join(", ")}) for chain "${s.name}" (id: ${s.id}).`);const[c]=await R(e,we,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ce(dn(a))],blockNumber:n,blockTag:r});return c}async function Bo(e,t){var b,g,w;const{account:n=e.account,blockNumber:r,blockTag:a="latest",blobs:s,data:o,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:p,value:l,...y}=t,m=n?re(n):void 0;try{St(t);const $=(typeof r=="bigint"?T(r):void 0)||a,I=(w=(g=(b=e.chain)==null?void 0:b.formatters)==null?void 0:g.transactionRequest)==null?void 0:w.format,S=(I||rn)({...qr(y,{format:I}),from:m==null?void 0:m.address,blobs:s,data:o,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:p,value:l}),A=await e.request({method:"eth_createAccessList",params:[S,$]});return{accessList:A.accessList,gasUsed:BigInt(A.gasUsed)}}catch(x){throw Qs(x,{...t,account:m,chain:e.chain})}}function mn(e,{method:t}){var r,a;const n={};return e.transport.type==="fallback"&&((a=(r=e.transport).onResponse)==null||a.call(r,({method:s,response:o,status:i,transport:c})=>{i==="success"&&t===s&&(n[o]=c.request)})),s=>n[s]||e.request}async function zf(e){const t=mn(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}class Lf extends P{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const Ya="/docs/contract/encodeEventTopics";function Ot(e){var c;const{abi:t,eventName:n,args:r}=e;let a=t[0];if(n){const u=He({abi:t,name:n});if(!u)throw new Ta(n,{docsPath:Ya});a=u}if(a.type!=="event")throw new Ta(void 0,{docsPath:Ya});const s=ye(a),o=cn(s);let i=[];if(r&&"inputs"in a){const u=(c=a.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),f=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(d=>r[d.name]))??[]:[];f.length>0&&(i=(u==null?void 0:u.map((d,p)=>Array.isArray(f[p])?f[p].map((l,y)=>Xa({param:d,value:f[p][y]})):typeof f[p]<"u"&&f[p]!==null?Xa({param:d,value:f[p]}):null))??[])}return[o,...i]}function Xa({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return V(Jt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Lf(e.type);return pe([e],[t])}async function So(e,t){const{address:n,abi:r,args:a,eventName:s,fromBlock:o,strict:i,toBlock:c}=t,u=mn(e,{method:"eth_newFilter"}),f=s?Ot({abi:r,args:a,eventName:s}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?T(o):o,toBlock:typeof c=="bigint"?T(c):c,topics:f}]});return{abi:r,args:a,eventName:s,id:d,request:u(d),strict:!!i,type:"event"}}async function Io(e,{address:t,args:n,event:r,events:a,fromBlock:s,strict:o,toBlock:i}={}){const c=a??(r?[r]:void 0),u=mn(e,{method:"eth_newFilter"});let f=[];c&&(f=[c.flatMap(l=>Ot({abi:[l],eventName:l.name,args:n}))],r&&(f=f[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof s=="bigint"?T(s):s,toBlock:typeof i=="bigint"?T(i):i,...f.length?{topics:f}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:s,id:d,request:u(d),strict:!!o,toBlock:i,type:"event"}}async function $o(e){const t=mn(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function jf(e,t){const{abi:n,address:r,args:a,functionName:s,dataSuffix:o,...i}=t,c=me({abi:n,args:a,functionName:s});try{return await R(e,Yr,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...i})}catch(u){const f=i.account?re(i.account):void 0;throw st(u,{abi:n,address:r,args:a,docsPath:"/docs/contract/estimateContractGas",functionName:s,sender:f==null?void 0:f.address})}}async function Uf(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}const Vf=new Map,Hf=new Map;function qf(e){const t=(a,s)=>({clear:()=>s.delete(a),get:()=>s.get(a),set:o=>s.set(a,o)}),n=t(e,Vf),r=t(e,Hf);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Zf(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=qf(t),a=r.response.get();if(a&&n>0&&new Date().getTime()-a.created.getTime()<n)return a.data;let s=r.promise.get();s||(s=e(),r.promise.set(s));try{const o=await s;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Wf=e=>`blockNumber.${e}`;async function kt(e,{cacheTime:t=e.cacheTime}={}){const n=await Zf(()=>e.request({method:"eth_blockNumber"}),{cacheKey:Wf(e.uid),cacheTime:t});return BigInt(n)}async function Kf(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const a=n!==void 0?T(n):void 0;let s;return t?s=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):s=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[a||r]},{dedupe:!!a}),ke(s)}async function er(e,{address:t,blockNumber:n,blockTag:r="latest"}){const a=n!==void 0?T(n):void 0,s=await e.request({method:"eth_getCode",params:[t,a||r]},{dedupe:!!a});if(s!=="0x")return s}function bn(e,t){if(!ue(e,{strict:!1}))throw new Te({address:e});if(!ue(t,{strict:!1}))throw new Te({address:t});return e.toLowerCase()===t.toLowerCase()}const Ja="/docs/contract/decodeEventLog";function oa(e){const{abi:t,data:n,strict:r,topics:a}=e,s=r??!0,[o,...i]=a;if(!o)throw new nc({docsPath:Ja});const c=t.find(m=>m.type==="event"&&o===cn(ye(m)));if(!(c&&"name"in c)||c.type!=="event")throw new Os(o,{docsPath:Ja});const{name:u,inputs:f}=c,d=f==null?void 0:f.some(m=>!("name"in m&&m.name)),p=d?[]:{},l=f.map((m,b)=>[m,b]).filter(([m])=>"indexed"in m&&m.indexed);for(let m=0;m<l.length;m++){const[b,g]=l[m],w=i[m];if(!w)throw new on({abiItem:c,param:b});p[d?g:b.name||g]=Yf({param:b,value:w})}const y=f.filter(m=>!("indexed"in m&&m.indexed));if(y.length>0){if(n&&n!=="0x")try{const m=Bt(y,n);if(m)if(d)for(let b=0;b<f.length;b++)p[b]=p[b]??m.shift();else for(let b=0;b<y.length;b++)p[y[b].name]=m[b]}catch(m){if(s)throw m instanceof Ss||m instanceof _i?new gt({abiItem:c,data:n,params:y,size:ee(n)}):m}else if(s)throw new gt({abiItem:c,data:"0x",params:y,size:0})}return{eventName:u,args:Object.values(p).length>0?p:void 0}}function Yf({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Bt([e],t)||[])[0]}function ia(e){const{abi:t,args:n,logs:r,strict:a=!0}=e,s=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(o=>{var i;try{const c=t.find(f=>f.type==="event"&&o.topics[0]===cn(f));if(!c)return null;const u=oa({...o,abi:[c],strict:a});return s&&!s.includes(u.eventName)||!Xf({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...o}}catch(c){let u,f;if(c instanceof Os)return null;if(c instanceof gt||c instanceof on){if(a)return null;u=c.abiItem.name,f=(i=c.abiItem.inputs)==null?void 0:i.some(d=>!("name"in d&&d.name))}return{...o,args:f?[]:{},eventName:u}}}).filter(Boolean)}function Xf(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function a(s,o,i){try{return s.type==="address"?bn(o,i):s.type==="string"||s.type==="bytes"?V(Jt(o))===i:o===i}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((s,o)=>{if(s==null)return!0;const i=n[o];return i?(Array.isArray(s)?s:[s]).some(u=>a(i,u,t[o])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([s,o])=>{if(o==null)return!0;const i=n.find(u=>u.name===s);return i?(Array.isArray(o)?o:[o]).some(u=>a(i,u,t[s])):!1}):!1}async function ca(e,{address:t,blockHash:n,fromBlock:r,toBlock:a,event:s,events:o,args:i,strict:c}={}){const u=c??!1,f=o??(s?[s]:void 0);let d=[];f&&(d=[f.flatMap(m=>Ot({abi:[m],eventName:m.name,args:o?void 0:i}))],s&&(d=d[0]));let p;n?p=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):p=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?T(r):r,toBlock:typeof a=="bigint"?T(a):a}]});const l=p.map(y=>Se(y));return f?ia({abi:f,args:i,logs:l,strict:u}):l}async function Oo(e,t){const{abi:n,address:r,args:a,blockHash:s,eventName:o,fromBlock:i,toBlock:c,strict:u}=t,f=o?He({abi:n,name:o}):void 0,d=f?void 0:n.filter(p=>p.type==="event");return R(e,ca,"getLogs")({address:r,args:a,blockHash:s,event:f,events:d,fromBlock:i,toBlock:c,strict:u})}class Jf extends P{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Qf(e,t){const{address:n,factory:r,factoryData:a}=t;try{const[s,o,i,c,u,f,d]=await R(e,we,"readContract")({abi:ed,address:n,functionName:"eip712Domain",factory:r,factoryData:a});return{domain:{name:o,version:i,chainId:Number(c),verifyingContract:u,salt:f},extensions:d,fields:s}}catch(s){const o=s;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Jf({address:n}):o}}const ed=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function td(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function nd(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:a}){const s=typeof n=="bigint"?T(n):void 0,o=await e.request({method:"eth_feeHistory",params:[T(t),s||r,a]},{dedupe:!!s});return td(o)}async function hn(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const a=r.map(s=>Se(s));return!("abi"in t)||!t.abi?a:ia({abi:t.abi,logs:a,strict:n})}async function rd(e,{filter:t}){const n=t.strict??!1,a=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(s=>Se(s));return t.abi?ia({abi:t.abi,logs:a,strict:n}):a}async function ad(e,{address:t,blockNumber:n,blockTag:r="latest",slot:a}){const s=n!==void 0?T(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,a,s||r]})}async function ua(e,{blockHash:t,blockNumber:n,blockTag:r,hash:a,index:s}){var f,d,p;const o=r||"latest",i=n!==void 0?T(n):void 0;let c=null;if(a?c=await e.request({method:"eth_getTransactionByHash",params:[a]},{dedupe:!0}):t?c=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,T(s)]},{dedupe:!0}):(i||o)&&(c=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[i||o,T(s)]},{dedupe:!!i})),!c)throw new bs({blockHash:t,blockNumber:n,blockTag:o,hash:a,index:s});return(((p=(d=(f=e.chain)==null?void 0:f.formatters)==null?void 0:d.transaction)==null?void 0:p.format)||Di)(c)}async function sd(e,{hash:t,transactionReceipt:n}){const[r,a]=await Promise.all([R(e,kt,"getBlockNumber")({}),t?R(e,ua,"getTransaction")({hash:t}):void 0]),s=(n==null?void 0:n.blockNumber)||(a==null?void 0:a.blockNumber);return s?r-s+1n:0n}async function Gt(e,{hash:t}){var a,s,o;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new hs({hash:t});return(((o=(s=(a=e.chain)==null?void 0:a.formatters)==null?void 0:s.transactionReceipt)==null?void 0:o.format)||gs)(n)}async function od(e,t){var g;const{account:n,allowFailure:r=!0,batchSize:a,blockNumber:s,blockTag:o,multicallAddress:i,stateOverride:c}=t,u=t.contracts,f=a??(typeof((g=e.batch)==null?void 0:g.multicall)=="object"&&e.batch.multicall.batchSize||1024);let d=i;if(!d){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");d=ct({blockNumber:s,chain:e.chain,contract:"multicall3"})}const p=[[]];let l=0,y=0;for(let w=0;w<u.length;w++){const{abi:x,address:$,args:I,functionName:D}=u[w];try{const S=me({abi:x,args:I,functionName:D});y+=(S.length-2)/2,f>0&&y>f&&p[l].length>0&&(l++,y=(S.length-2)/2,p[l]=[]),p[l]=[...p[l],{allowFailure:!0,callData:S,target:$}]}catch(S){const A=st(S,{abi:x,address:$,args:I,docsPath:"/docs/contract/multicall",functionName:D,sender:n});if(!r)throw A;p[l]=[...p[l],{allowFailure:!0,callData:"0x",target:$}]}}const m=await Promise.allSettled(p.map(w=>R(e,we,"readContract")({abi:Yn,account:n,address:d,args:[w],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:c}))),b=[];for(let w=0;w<m.length;w++){const x=m[w];if(x.status==="rejected"){if(!r)throw x.reason;for(let I=0;I<p[w].length;I++)b.push({status:"failure",error:x.reason,result:void 0});continue}const $=x.value;for(let I=0;I<$.length;I++){const{returnData:D,success:S}=$[I],{callData:A}=p[w][I],{abi:h,address:k,functionName:v,args:B}=u[b.length];try{if(A==="0x")throw new Pt;if(!S)throw new un({data:D});const O=qe({abi:h,args:B,data:D,functionName:v});b.push(r?{result:O,status:"success"}:O)}catch(O){const C=st(O,{abi:h,address:k,args:B,docsPath:"/docs/contract/multicall",functionName:v});if(!r)throw C;b.push({error:C,result:void 0,status:"failure"})}}}if(b.length!==u.length)throw new P("multicall results mismatch");return b}async function tr(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:a,returnFullTransactions:s,traceTransfers:o,validation:i}=t;try{const c=[];for(const p of a){const l=p.blockOverrides?vo(p.blockOverrides):void 0,y=p.calls.map(b=>{const g=b,w=g.account?re(g.account):void 0,x=g.abi?me(g):g.data,$={...g,data:g.dataSuffix?Y([x||"0x",g.dataSuffix]):x,from:g.from??(w==null?void 0:w.address)};return St($),rn($)}),m=p.stateOverrides?fn(p.stateOverrides):void 0;c.push({blockOverrides:l,calls:y,stateOverrides:m})}const f=(typeof n=="bigint"?T(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:s,traceTransfers:o,validation:i},f]})).map((p,l)=>({...ys(p),calls:p.calls.map((y,m)=>{var k,v;const{abi:b,args:g,functionName:w,to:x}=a[l].calls[m],$=((k=y.error)==null?void 0:k.data)??y.returnData,I=BigInt(y.gasUsed),D=(v=y.logs)==null?void 0:v.map(B=>Se(B)),S=y.status==="0x1"?"success":"failure",A=b&&S==="success"&&$!=="0x"?qe({abi:b,data:$,functionName:w}):null,h=(()=>{var O;if(S==="success")return;let B;if(((O=y.error)==null?void 0:O.data)==="0x"?B=new Pt:y.error&&(B=new un(y.error)),!!B)return st(B,{abi:b??[],address:x??"0x",args:g,functionName:w??"<unknown>"})})();return{data:$,gasUsed:I,logs:D,status:S,...S==="success"?{result:A}:{error:h}}})}))}catch(c){const u=c,f=Hr(u,{});throw f instanceof nn?u:f}}function ko(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Mi(tf(e));return n==="Bytes"?r:ho(r)}class id extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const cd={checksum:new id(8192)},Tn=cd.checksum,ud=/^0x[a-fA-F0-9]{40}$/;function gn(e,t={}){const{strict:n=!0}=t;if(!ud.test(e))throw new Qa({address:e,cause:new dd});if(n){if(e.toLowerCase()===e)return;if(fd(e)!==e)throw new Qa({address:e,cause:new ld})}}function fd(e){if(Tn.has(e))return Tn.get(e);gn(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=ko(af(t),{as:"Bytes"}),r=t.split("");for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&r[s]&&(r[s]=r[s].toUpperCase()),(n[s>>1]&15)>=8&&r[s+1]&&(r[s+1]=r[s+1].toUpperCase());const a=`0x${r.join("")}`;return Tn.set(e,a),a}function nr(e,t={}){const{strict:n=!0}=t??{};try{return gn(e,{strict:n}),!0}catch{return!1}}class Qa extends H{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class dd extends H{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class ld extends H{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function rr(e){let t=!0,n="",r=0,a="",s=!1;for(let o=0;o<e.length;o++){const i=e[o];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function","error",""].includes(a))a="";else if(a+=i,i===")"){s=!0;break}continue}if(i===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}a+=i,n+=i}}if(!s)throw new H("Unable to normalize signature.");return a}function ar(e,t){const n=typeof e,r=t.type;switch(r){case"address":return nr(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((a,s)=>ar(Object.values(e)[s],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(a=>ar(a,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function To(e,t,n){for(const r in e){const a=e[r],s=t[r];if(a.type==="tuple"&&s.type==="tuple"&&"components"in a&&"components"in s)return To(a.components,s.components,n[r]);const o=[a.type,s.type];if((()=>o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?nr(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?nr(n[r],{strict:!1}):!1)())return o}}function Co(e,t={}){const{prepare:n=!0}=t,r=(()=>Array.isArray(e)||typeof e=="string"?Na(e):e)();return{...r,...n?{hash:Qe(r)}:{}}}function pd(e,t,n){const{args:r=[],prepare:a=!0}=n??{},s=lf(t,{strict:!1}),o=e.filter(u=>s?u.type==="function"||u.type==="error"?No(u)===ra(t,0,4):u.type==="event"?Qe(u)===t:!1:"name"in u&&u.name===t);if(o.length===0)throw new sr({name:t});if(o.length===1)return{...o[0],...a?{hash:Qe(o[0])}:{}};let i;for(const u of o){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...a?{hash:Qe(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,p)=>{const l="inputs"in u&&u.inputs[p];return l?ar(d,l):!1})){if(i&&"inputs"in i&&i.inputs){const d=To(u.inputs,i.inputs,r);if(d)throw new md({abiItem:u,type:d[0]},{abiItem:i,type:d[1]})}i=u}}const c=(()=>{if(i)return i;const[u,...f]=o;return{...u,overloads:f}})();if(!c)throw new sr({name:t});return{...c,...a?{hash:Qe(c)}:{}}}function No(e){return ra(Qe(e),0,4)}function yd(e){const t=(()=>typeof e=="string"?e:Dt(e))();return rr(t)}function Qe(e){return typeof e!="string"&&"hash"in e&&e.hash?e.hash:ko(na(yd(e)))}class md extends H{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${rr(Dt(t.abiItem))}\`, and`,`\`${n.type}\` in \`${rr(Dt(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class sr extends H{constructor({name:t,data:n,type:r="item"}){const a=(()=>t?` with name "${t}"`:n?` with data "${n}"`:"")();super(`ABI ${r}${a} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const bd=/^(.*)\[([0-9]*)\]$/,hd=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Go=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function gd({checksumAddress:e,parameters:t,values:n}){const r=[];for(let a=0;a<t.length;a++)r.push(fa({checksumAddress:e,parameter:t[a],value:n[a]}));return r}function fa({checksumAddress:e=!1,parameter:t,value:n}){const r=t,a=Sd(r.type);if(a){const[s,o]=a;return vd(n,{checksumAddress:e,length:s,parameter:{...r,type:o}})}if(r.type==="tuple")return Bd(n,{checksumAddress:e,parameter:r});if(r.type==="address")return wd(n,{checksum:e});if(r.type==="bool")return Ed(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const s=r.type.startsWith("int"),[,,o="256"]=Go.exec(r.type)??[];return Pd(n,{signed:s,size:Number(o)})}if(r.type.startsWith("bytes"))return xd(n,{type:r.type});if(r.type==="string")return Ad(n);throw new Mo(r.type)}function da(e){let t=0;for(let s=0;s<e.length;s++){const{dynamic:o,encoded:i}=e[s];o?t+=32:t+=de(i)}const n=[],r=[];let a=0;for(let s=0;s<e.length;s++){const{dynamic:o,encoded:i}=e[s];o?(n.push(Q(t+a,{size:32})),r.push(i),a+=de(i)):n.push(i)}return ge(...n,...r)}function wd(e,t){const{checksum:n=!1}=t;return gn(e,{strict:n}),{dynamic:!1,encoded:je(e.toLowerCase())}}function vd(e,t){const{checksumAddress:n,length:r,parameter:a}=t,s=r===null;if(!Array.isArray(e))throw new $d(e);if(!s&&e.length!==r)throw new Id({expectedLength:r,givenLength:e.length,type:`${a.type}[${r}]`});let o=!1;const i=[];for(let c=0;c<e.length;c++){const u=fa({checksumAddress:n,parameter:a,value:e[c]});u.dynamic&&(o=!0),i.push(u)}if(s||o){const c=da(i);if(s){const u=Q(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?ge(u,c):u}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:ge(...i.map(({encoded:c})=>c))}}function xd(e,{type:t}){const[,n]=t.split("bytes"),r=de(e);if(!n){let a=e;return r%32!==0&&(a=Ue(a,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:ge(je(Q(r,{size:32})),a)}}if(r!==Number.parseInt(n))throw new _o({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:Ue(e)}}function Ed(e){if(typeof e!="boolean")throw new H(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:je(bo(e))}}function Pd(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,a=t?-r-1n:0n;if(e>r||e<a)throw new go({max:r.toString(),min:a.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:Q(e,{size:32,signed:t})}}function Ad(e){const t=na(e),n=Math.ceil(de(t)/32),r=[];for(let a=0;a<n;a++)r.push(Ue(ra(t,a*32,(a+1)*32)));return{dynamic:!0,encoded:ge(Ue(Q(de(t),{size:32})),...r)}}function Bd(e,t){const{checksumAddress:n,parameter:r}=t;let a=!1;const s=[];for(let o=0;o<r.components.length;o++){const i=r.components[o],c=Array.isArray(e)?o:i.name,u=fa({checksumAddress:n,parameter:i,value:e[c]});s.push(u),u.dynamic&&(a=!0)}return{dynamic:a,encoded:a?da(s):ge(...s.map(({encoded:o})=>o))}}function Sd(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Ro(e,t,n){const{checksumAddress:r=!1}=n??{};if(e.length!==t.length)throw new Do({expectedLength:e.length,givenLength:t.length});const a=gd({checksumAddress:r,parameters:e,values:t}),s=da(a);return s.length===0?"0x":s}function or(e,t){if(e.length!==t.length)throw new Do({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const a=e[r],s=t[r];n.push(or.encode(a,s))}return ge(...n)}(function(e){function t(n,r,a=!1){if(n==="address"){const c=r;return gn(c),je(c.toLowerCase(),a?32:0)}if(n==="string")return na(r);if(n==="bytes")return r;if(n==="bool")return je(bo(r),a?32:1);const s=n.match(Go);if(s){const[c,u,f="256"]=s,d=Number.parseInt(f)/8;return Q(r,{size:a?32:d,signed:u==="int"})}const o=n.match(hd);if(o){const[c,u]=o;if(Number.parseInt(u)!==(r.length-2)/2)throw new _o({expectedSize:Number.parseInt(u),value:r});return Ue(r,a?32:0)}const i=n.match(bd);if(i&&Array.isArray(r)){const[c,u]=i,f=[];for(let d=0;d<r.length;d++)f.push(t(u,r[d],!0));return f.length===0?"0x":ge(...f)}throw new Mo(n)}e.encode=t})(or||(or={}));class Id extends H{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class _o extends H{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${de(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Do extends H{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class $d extends H{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Mo extends H{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Od(e,t){var a;const{bytecode:n,args:r}=t;return ge(n,(a=e.inputs)!=null&&a.length&&(r!=null&&r.length)?Ro(e.inputs,r):"0x")}function kd(e){return Co(e)}function Td(e,...t){const{overloads:n}=e,r=n?Cd([e,...n],e.name,{args:t[0]}):e,a=Nd(r),s=t.length>0?Ro(r.inputs,t[0]):void 0;return s?ge(a,s):a}function Je(e,t={}){return Co(e,t)}function Cd(e,t,n){const r=pd(e,t,n);if(r.type!=="function")throw new sr({name:t,type:"function"});return r}function Nd(e){return No(e)}const Gd="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",be="0x0000000000000000000000000000000000000000";class Rd extends P{constructor({domain:t}){super(`Invalid domain "${fe(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class _d extends P{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Dd extends P{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Fo(e){const{domain:t={},message:n,primaryType:r}=e,a={EIP712Domain:jd({domain:t}),...e.types};Ld({domain:t,message:n,primaryType:r,types:a});const s=["0x1901"];return t&&s.push(Md({domain:t,types:a})),r!=="EIP712Domain"&&s.push(zo({data:n,primaryType:r,types:a})),V(Y(s))}function Md({domain:e,types:t}){return zo({data:e,primaryType:"EIP712Domain",types:t})}function zo({data:e,primaryType:t,types:n}){const r=Lo({data:e,primaryType:t,types:n});return V(r)}function Lo({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],a=[Fd({primaryType:t,types:n})];for(const s of n[t]){const[o,i]=Uo({types:n,name:s.name,type:s.type,value:e[s.name]});r.push(o),a.push(i)}return pe(r,a)}function Fd({primaryType:e,types:t}){const n=Ce(zd({primaryType:e,types:t}));return V(n)}function zd({primaryType:e,types:t}){let n="";const r=jo({primaryType:e,types:t});r.delete(e);const a=[e,...Array.from(r).sort()];for(const s of a)n+=`${s}(${t[s].map(({name:o,type:i})=>`${i} ${o}`).join(",")})`;return n}function jo({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),a=r==null?void 0:r[0];if(n.has(a)||t[a]===void 0)return n;n.add(a);for(const s of t[a])jo({primaryType:s.type,types:t},n);return n}function Uo({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},V(Lo({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},V(r)];if(n==="string")return[{type:"bytes32"},V(Ce(r))];if(n.lastIndexOf("]")===n.length-1){const a=n.slice(0,n.lastIndexOf("[")),s=r.map(o=>Uo({name:t,type:a,types:e,value:o}));return[{type:"bytes32"},V(pe(s.map(([o])=>o),s.map(([,o])=>o)))]}return[{type:n},r]}function Ld(e){const{domain:t,message:n,primaryType:r,types:a}=e,s=(o,i)=>{for(const c of o){const{name:u,type:f}=c,d=i[u],p=f.match(Lr);if(p&&(typeof d=="number"||typeof d=="bigint")){const[m,b,g]=p;T(d,{signed:b==="int",size:Number.parseInt(g)/8})}if(f==="address"&&typeof d=="string"&&!ue(d))throw new Te({address:d});const l=f.match(qs);if(l){const[m,b]=l;if(b&&ee(d)!==Number.parseInt(b))throw new Ts({expectedSize:Number.parseInt(b),givenSize:ee(d)})}const y=a[f];y&&(Ud(f),s(y,d))}};if(a.EIP712Domain&&t){if(typeof t!="object")throw new Rd({domain:t});s(a.EIP712Domain,t)}if(r!=="EIP712Domain")if(a[r])s(a[r],n);else throw new _d({primaryType:r,types:a})}function jd({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Ud(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Dd({type:e})}function z0(e,t){if(e.length!==t.length)throw new Is({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const a=e[r],s=t[r];n.push(Vo(a,s))}return Ve(n)}function Vo(e,t,n=!1){if(e==="address"){const o=t;if(!ue(o))throw new Te({address:o});return ie(o.toLowerCase(),{size:n?32:null})}if(e==="string")return _t(t);if(e==="bytes")return t;if(e==="bool")return ie(ds(t),{size:n?32:1});const r=e.match(Lr);if(r){const[o,i,c="256"]=r,u=Number.parseInt(c)/8;return T(t,{size:n?32:u,signed:i==="int"})}const a=e.match(qs);if(a){const[o,i]=a;if(Number.parseInt(i)!==(t.length-2)/2)throw new Ts({expectedSize:Number.parseInt(i),givenSize:(t.length-2)/2});return ie(t,{dir:"right",size:n?32:null})}const s=e.match(nu);if(s&&Array.isArray(t)){const[o,i]=s,c=[];for(let u=0;u<t.length;u++)c.push(Vo(i,t[u],!0));return c.length===0?"0x":Ve(c)}throw new cc(e)}const Vd=`Ethereum Signed Message:
`;function Hd(e){const t=(()=>typeof e=="string"?_t(e):typeof e.raw=="string"?e.raw:ce(e.raw))(),n=_t(`${Vd}${ee(t)}`);return Y([n,t])}function Ho(e,t){return V(Hd(e),t)}const qo="0x6492649264926492649264926492649264926492649264926492649264926492";function qd(e){return Ln(e,-32)===qo}function Rt(e){const{address:t,data:n,signature:r,to:a="hex"}=e,s=Ve([pe([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),qo]);return a==="hex"?s:en(s)}function Zd(e){const{source:t}=e,n=new Map,r=new Fi(8192),a=new Map,s=({address:o,chainId:i})=>`${o}.${i}`;return{async consume({address:o,chainId:i,client:c}){const u=s({address:o,chainId:i}),f=this.get({address:o,chainId:i,client:c});this.increment({address:o,chainId:i});const d=await f;return await t.set({address:o,chainId:i},d),r.set(u,d),d},async increment({address:o,chainId:i}){const c=s({address:o,chainId:i}),u=n.get(c)??0;n.set(c,u+1)},async get({address:o,chainId:i,client:c}){const u=s({address:o,chainId:i});let f=a.get(u);return f||(f=(async()=>{try{const p=await t.get({address:o,chainId:i,client:c}),l=r.get(u)??0;return l>0&&p<=l?l+1:(r.delete(u),p)}finally{this.reset({address:o,chainId:i})}})(),a.set(u,f)),(n.get(u)??0)+await f},reset({address:o,chainId:i}){const c=s({address:o,chainId:i});n.delete(c),a.delete(c)}}}const Wd="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Kd(e,t){const{blockNumber:n,blockTag:r,calls:a,stateOverrides:s,traceAssetChanges:o,traceTransfers:i,validation:c}=t,u=t.account?re(t.account):void 0;if(o&&!u)throw new P("`account` is required when `traceAssetChanges` is true");const f=u?Od(kd("constructor(bytes, bytes)"),{bytecode:xo,args:[Wd,Td(Je("function getBalance(address)"),[u.address])]}):void 0,d=o?await Promise.all(t.calls.map(async E=>{if(!E.data&&!E.abi)return;const{accessList:M}=await Bo(e,{account:u.address,...E,data:E.abi?me(E):E.data});return M.map(({address:z,storageKeys:F})=>F.length>0?z:null)})).then(E=>E.flat().filter(Boolean)):[],p=await tr(e,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:f}],stateOverrides:s},{calls:d.map((E,M)=>({abi:[Je("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:E,from:be,nonce:M})),stateOverrides:[{address:be,nonce:0}]}]:[],{calls:[...a,{}].map(E=>({...E,from:u==null?void 0:u.address})),stateOverrides:s},...o?[{calls:[{data:f}]},{calls:d.map((E,M)=>({abi:[Je("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:E,from:be,nonce:M})),stateOverrides:[{address:be,nonce:0}]},{calls:d.map((E,M)=>({to:E,abi:[Je("function decimals() returns (uint256)")],functionName:"decimals",from:be,nonce:M})),stateOverrides:[{address:be,nonce:0}]},{calls:d.map((E,M)=>({to:E,abi:[Je("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:be,nonce:M})),stateOverrides:[{address:be,nonce:0}]},{calls:d.map((E,M)=>({to:E,abi:[Je("function symbol() returns (string)")],functionName:"symbol",from:be,nonce:M})),stateOverrides:[{address:be,nonce:0}]}]:[]],traceTransfers:i,validation:c}),l=o?p[2]:p[0],[y,m,,b,g,w,x,$]=o?p:[],{calls:I,...D}=l,S=I.slice(0,-1)??[],A=(y==null?void 0:y.calls)??[],h=(m==null?void 0:m.calls)??[],k=[...A,...h].map(E=>E.status==="success"?ne(E.data):null),v=(b==null?void 0:b.calls)??[],B=(g==null?void 0:g.calls)??[],O=[...v,...B].map(E=>E.status==="success"?ne(E.data):null),C=((w==null?void 0:w.calls)??[]).map(E=>E.status==="success"?E.result:null),N=(($==null?void 0:$.calls)??[]).map(E=>E.status==="success"?E.result:null),G=((x==null?void 0:x.calls)??[]).map(E=>E.status==="success"?E.result:null),_=[];for(const[E,M]of O.entries()){const z=k[E];if(typeof M!="bigint"||typeof z!="bigint")continue;const F=C[E-1],q=N[E-1],j=G[E-1],Z=(()=>E===0?{address:Gd,decimals:18,symbol:"ETH"}:{address:d[E-1],decimals:j||F?Number(F??1):void 0,symbol:q??void 0})();_.some(L=>L.token.address===Z.address)||_.push({token:Z,value:{pre:z,post:M,diff:M-z}})}return{assetChanges:_,block:D,results:S}}const Cn=new Map,es=new Map;let Yd=0;function ve(e,t,n){const r=++Yd,a=()=>Cn.get(e)||[],s=()=>{const f=a();Cn.set(e,f.filter(d=>d.id!==r))},o=()=>{const f=a();if(!f.some(p=>p.id===r))return;const d=es.get(e);if(f.length===1&&d){const p=d();p instanceof Promise&&p.catch(()=>{})}s()},i=a();if(Cn.set(e,[...i,{id:r,fns:t}]),i&&i.length>0)return o;const c={};for(const f in t)c[f]=(...d)=>{var l,y;const p=a();if(p.length!==0)for(const m of p)(y=(l=m.fns)[f])==null||y.call(l,...d)};const u=n(c);return typeof u=="function"&&es.set(e,u),o}function We(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let a=!0;const s=()=>a=!1;return(async()=>{let i;t&&(i=await e({unpoll:s}));const c=await(n==null?void 0:n(i))??r;await $a(c);const u=async()=>{a&&(await e({unpoll:s}),await $a(r),u())};u()})(),s}function Xd(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:a,onError:s,includeTransactions:o,poll:i,pollingInterval:c=e.pollingInterval}){const u=(()=>typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))(),f=o??!1;let d;return u?(()=>{const y=fe(["watchBlocks",e.uid,t,n,r,f,c]);return ve(y,{onBlock:a,onError:s},m=>We(async()=>{var b;try{const g=await R(e,he,"getBlock")({blockTag:t,includeTransactions:f});if(g.number!==null&&(d==null?void 0:d.number)!=null){if(g.number===d.number)return;if(g.number-d.number>1&&n)for(let w=(d==null?void 0:d.number)+1n;w<g.number;w++){const x=await R(e,he,"getBlock")({blockNumber:w,includeTransactions:f});m.onBlock(x,d),d=x}}((d==null?void 0:d.number)==null||t==="pending"&&(g==null?void 0:g.number)==null||g.number!==null&&g.number>d.number)&&(m.onBlock(g,d),d=g)}catch(g){(b=m.onError)==null||b.call(m,g)}},{emitOnBegin:r,interval:c}))})():(()=>{let y=!0,m=!0,b=()=>y=!1;return(async()=>{try{r&&R(e,he,"getBlock")({blockTag:t,includeTransactions:f}).then(x=>{y&&m&&(a(x,void 0),m=!1)}).catch(s);const g=(()=>{if(e.transport.type==="fallback"){const x=e.transport.transports.find($=>$.config.type==="webSocket"||$.config.type==="ipc");return x?x.value:e.transport}return e.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],async onData(x){var I;if(!y)return;const $=await R(e,he,"getBlock")({blockNumber:(I=x.result)==null?void 0:I.number,includeTransactions:f}).catch(()=>{});y&&(a($,d),m=!1,d=$)},onError(x){s==null||s(x)}});b=w,y||b()}catch(g){s==null||s(g)}})(),()=>b()})()}function Zo(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:a,poll:s,pollingInterval:o=e.pollingInterval}){const i=(()=>typeof s<"u"?s:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))();let c;return i?(()=>{const d=fe(["watchBlockNumber",e.uid,t,n,o]);return ve(d,{onBlockNumber:r,onError:a},p=>We(async()=>{var l;try{const y=await R(e,kt,"getBlockNumber")({cacheTime:0});if(c){if(y===c)return;if(y-c>1&&n)for(let m=c+1n;m<y;m++)p.onBlockNumber(m,c),c=m}(!c||y>c)&&(p.onBlockNumber(y,c),c=y)}catch(y){(l=p.onError)==null||l.call(p,y)}},{emitOnBegin:t,interval:o}))})():(()=>{const d=fe(["watchBlockNumber",e.uid,t,n]);return ve(d,{onBlockNumber:r,onError:a},p=>{let l=!0,y=()=>l=!1;return(async()=>{try{const m=(()=>{if(e.transport.type==="fallback"){const g=e.transport.transports.find(w=>w.config.type==="webSocket"||w.config.type==="ipc");return g?g.value:e.transport}return e.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],onData(g){var x;if(!l)return;const w=ne((x=g.result)==null?void 0:x.number);p.onBlockNumber(w,c),c=w},onError(g){var w;(w=p.onError)==null||w.call(p,g)}});y=b,l||y()}catch(m){a==null||a(m)}})(),()=>y()})})()}async function wn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function Jd(e,{address:t,args:n,batch:r=!0,event:a,events:s,fromBlock:o,onError:i,onLogs:c,poll:u,pollingInterval:f=e.pollingInterval,strict:d}){const p=(()=>typeof u<"u"?u:typeof o=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))(),l=d??!1;return p?(()=>{const b=fe(["watchEvent",t,n,r,e.uid,a,f,o]);return ve(b,{onLogs:c,onError:i},g=>{let w;o!==void 0&&(w=o-1n);let x,$=!1;const I=We(async()=>{var D;if(!$){try{x=await R(e,Io,"createEventFilter")({address:t,args:n,event:a,events:s,strict:l,fromBlock:o})}catch{}$=!0;return}try{let S;if(x)S=await R(e,hn,"getFilterChanges")({filter:x});else{const A=await R(e,kt,"getBlockNumber")({});w&&w!==A?S=await R(e,ca,"getLogs")({address:t,args:n,event:a,events:s,fromBlock:w+1n,toBlock:A}):S=[],w=A}if(S.length===0)return;if(r)g.onLogs(S);else for(const A of S)g.onLogs([A])}catch(S){x&&S instanceof ws&&($=!1),(D=g.onError)==null||D.call(g,S)}},{emitOnBegin:!0,interval:f});return async()=>{x&&await R(e,wn,"uninstallFilter")({filter:x}),I()}})})():(()=>{let b=!0,g=()=>b=!1;return(async()=>{try{const w=(()=>{if(e.transport.type==="fallback"){const D=e.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return D?D.value:e.transport}return e.transport})(),x=s??(a?[a]:void 0);let $=[];x&&($=[x.flatMap(S=>Ot({abi:[S],eventName:S.name,args:n}))],a&&($=$[0]));const{unsubscribe:I}=await w.subscribe({params:["logs",{address:t,topics:$}],onData(D){var A;if(!b)return;const S=D.result;try{const{eventName:h,args:k}=oa({abi:x??[],data:S.data,topics:S.topics,strict:l}),v=Se(S,{args:k,eventName:h});c([v])}catch(h){let k,v;if(h instanceof gt||h instanceof on){if(d)return;k=h.abiItem.name,v=(A=h.abiItem.inputs)==null?void 0:A.some(O=>!("name"in O&&O.name))}const B=Se(S,{args:v?[]:{},eventName:k});c([B])}},onError(D){i==null||i(D)}});g=I,b||g()}catch(w){i==null||i(w)}})(),()=>g()})()}function Qd(e,{batch:t=!0,onError:n,onTransactions:r,poll:a,pollingInterval:s=e.pollingInterval}){return(typeof a<"u"?a:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=fe(["watchPendingTransactions",e.uid,t,s]);return ve(u,{onTransactions:r,onError:n},f=>{let d;const p=We(async()=>{var l;try{if(!d)try{d=await R(e,$o,"createPendingTransactionFilter")({});return}catch(m){throw p(),m}const y=await R(e,hn,"getFilterChanges")({filter:d});if(y.length===0)return;if(t)f.onTransactions(y);else for(const m of y)f.onTransactions([m])}catch(y){(l=f.onError)==null||l.call(f,y)}},{emitOnBegin:!0,interval:s});return async()=>{d&&await R(e,wn,"uninstallFilter")({filter:d}),p()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(p){if(!u)return;const l=p.result;r([l])},onError(p){n==null||n(p)}});f=d,u||f()}catch(d){n==null||n(d)}})(),()=>f()})()}const el="0x5792579257925792579257925792579257925792579257925792579257925792",tl=T(0,{size:32});async function nl(e,t){async function n(f){if(f.endsWith(el.slice(2))){const p=Et(Ln(f,-64,-32)),l=Ln(f,0,-64).slice(2).match(/.{1,64}/g),y=await Promise.all(l.map(b=>tl.slice(2)!==b?e.request({method:"eth_getTransactionReceipt",params:[`0x${b}`]},{dedupe:!0}):void 0)),m=(()=>y.some(b=>b===null)?100:y.every(b=>(b==null?void 0:b.status)==="0x1")?200:y.every(b=>(b==null?void 0:b.status)==="0x0")?500:600)();return{atomic:!1,chainId:ke(p),receipts:y.filter(Boolean),status:m,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[f]})}const{atomic:r=!1,chainId:a,receipts:s,version:o="2.0.0",...i}=await n(t.id),[c,u]=(()=>{const f=i.status;return f>=100&&f<200?["pending",f]:f>=200&&f<300?["success",f]:f>=300&&f<700?["failure",f]:f==="CONFIRMED"?["success",200]:f==="PENDING"?["pending",100]:[void 0,f]})();return{...i,atomic:r,chainId:a?ke(a):void 0,receipts:(s==null?void 0:s.map(f=>({...f,blockNumber:ne(f.blockNumber),gasUsed:ne(f.gasUsed),status:zi[f.status]})))??[],statusCode:u,status:c,version:o}}class rl extends P{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function L0(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:a=({statusCode:m})=>m===200||m>=300,retryCount:s=4,retryDelay:o=({count:m})=>~~(1<<m)*200,timeout:i=6e4,throwOnFailure:c=!1}=t,u=fe(["waitForCallsStatus",e.uid,n]),{promise:f,resolve:d,reject:p}=vs();let l;const y=ve(u,{resolve:d,reject:p},m=>{const b=We(async()=>{const g=w=>{clearTimeout(l),b(),w(),y()};try{const w=await jn(async()=>{const x=await nl(e,{id:n});if(c&&x.status==="failure")throw new rl(x);return x},{retryCount:s,delay:o});if(!a(w))return;g(()=>m.resolve(w))}catch(w){g(()=>m.reject(w))}},{interval:r,emitOnBegin:!0});return b});return l=i?setTimeout(()=>{y(),clearTimeout(l),p(new al({id:n}))},i):void 0,await f}class al extends P{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function sl(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function ol(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?ke(e.nonce):void 0,storageProof:e.storageProof?sl(e.storageProof):void 0}}async function il(e,{address:t,blockNumber:n,blockTag:r,storageKeys:a}){const s=r??"latest",o=n!==void 0?T(n):void 0,i=await e.request({method:"eth_getProof",params:[t,a,o||s]});return ol(i)}async function cl(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:a,onReplaced:s,retryCount:o=6,retryDelay:i=({count:I})=>~~(1<<I)*200,timeout:c=18e4}=t,u=fe(["waitForTransactionReceipt",e.uid,a]),f=(()=>{var I;return t.pollingInterval?t.pollingInterval:(I=e.chain)!=null&&I.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval})();let d,p,l,y=!1,m,b;const{promise:g,resolve:w,reject:x}=vs(),$=c?setTimeout(()=>{b(),m(),x(new Li({hash:a}))},c):void 0;return m=ve(u,{onReplaced:s,resolve:w,reject:x},async I=>{if(l=await R(e,Gt,"getTransactionReceipt")({hash:a}).catch(()=>{}),l&&r<=1){clearTimeout($),I.resolve(l),m();return}b=R(e,Zo,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:f,async onBlockNumber(D){const S=h=>{clearTimeout($),b(),h(),m()};let A=D;if(!y)try{if(l){if(r>1&&(!l.blockNumber||A-l.blockNumber+1n<r))return;S(()=>I.resolve(l));return}if(n&&!d&&(y=!0,await jn(async()=>{d=await R(e,ua,"getTransaction")({hash:a}),d.blockNumber&&(A=d.blockNumber)},{delay:i,retryCount:o}),y=!1),l=await R(e,Gt,"getTransactionReceipt")({hash:a}),r>1&&(!l.blockNumber||A-l.blockNumber+1n<r))return;S(()=>I.resolve(l))}catch(h){if(h instanceof bs||h instanceof hs){if(!d){y=!1;return}try{p=d,y=!0;const k=await jn(()=>R(e,he,"getBlock")({blockNumber:A,includeTransactions:!0}),{delay:i,retryCount:o,shouldRetry:({error:O})=>O instanceof to});y=!1;const v=k.transactions.find(({from:O,nonce:C})=>O===p.from&&C===p.nonce);if(!v||(l=await R(e,Gt,"getTransactionReceipt")({hash:v.hash}),r>1&&(!l.blockNumber||A-l.blockNumber+1n<r)))return;let B="replaced";v.to===p.to&&v.value===p.value&&v.input===p.input?B="repriced":v.from===v.to&&v.value===0n&&(B="cancelled"),S(()=>{var O;(O=I.onReplaced)==null||O.call(I,{reason:B,replacedTransaction:p,transaction:v,transactionReceipt:l}),I.resolve(l)})}catch(k){S(()=>I.reject(k))}}else S(()=>I.reject(h))}}})}),g}async function ul(e,t){var c;const{account:n=e.account,chainId:r,nonce:a}=t;if(!n)throw new an({docsPath:"/docs/eip7702/prepareAuthorization"});const s=re(n),o=(()=>{if(t.executor)return t.executor==="self"?t.executor:re(t.executor)})(),i={address:t.contractAddress??t.address,chainId:r,nonce:a};return typeof i.chainId>"u"&&(i.chainId=((c=e.chain)==null?void 0:c.id)??await R(e,It,"getChainId")({})),typeof i.nonce>"u"&&(i.nonce=await R(e,Xr,"getTransactionCount")({address:s.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&bn(o.address,s.address))&&(i.nonce+=1)),i}async function fl(e,t){const{abi:n,address:r,args:a,dataSuffix:s,functionName:o,...i}=t,c=i.account?re(i.account):e.account,u=me({abi:n,args:a,functionName:o});try{const{data:f}=await R(e,yn,"call")({batch:!1,data:`${u}${s?s.replace("0x",""):""}`,to:r,...i,account:c}),d=qe({abi:n,args:a,functionName:o,data:f||"0x"}),p=n.filter(l=>"name"in l&&l.name===t.functionName);return{result:d,request:{abi:p,address:r,args:a,dataSuffix:s,functionName:o,...i,account:c}}}catch(f){throw st(f,{abi:n,address:r,args:a,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ae=BigInt(0),te=BigInt(1),_e=BigInt(2),dl=BigInt(3),Wo=BigInt(4),Ko=BigInt(5),Yo=BigInt(8);function K(e,t){const n=e%t;return n>=ae?n:t+n}function oe(e,t,n){let r=e;for(;t-- >ae;)r*=r,r%=n;return r}function ts(e,t){if(e===ae)throw new Error("invert: expected non-zero number");if(t<=ae)throw new Error("invert: expected positive modulus, got "+t);let n=K(e,t),r=t,a=ae,s=te;for(;n!==ae;){const i=r/n,c=r%n,u=a-s*i;r=n,n=c,a=s,s=u}if(r!==te)throw new Error("invert: does not exist");return K(a,t)}function Xo(e,t){const n=(e.ORDER+te)/Wo,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function ll(e,t){const n=(e.ORDER-Ko)/Yo,r=e.mul(t,_e),a=e.pow(r,n),s=e.mul(t,a),o=e.mul(e.mul(s,_e),a),i=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(i),t))throw new Error("Cannot find square root");return i}function pl(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-te,n=0;for(;t%_e===ae;)t/=_e,n++;let r=_e;const a=xn(e);for(;ns(a,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Xo;let s=a.pow(r,t);const o=(t+te)/_e;return function(c,u){if(c.is0(u))return u;if(ns(c,u)!==1)throw new Error("Cannot find square root");let f=n,d=c.mul(c.ONE,s),p=c.pow(u,t),l=c.pow(u,o);for(;!c.eql(p,c.ONE);){if(c.is0(p))return c.ZERO;let y=1,m=c.sqr(p);for(;!c.eql(m,c.ONE);)if(y++,m=c.sqr(m),y===f)throw new Error("Cannot find square root");const b=te<<BigInt(f-y-1),g=c.pow(d,b);f=y,d=c.sqr(g),p=c.mul(p,d),l=c.mul(l,g)}return l}}function yl(e){return e%Wo===dl?Xo:e%Yo===Ko?ll:pl(e)}const ml=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Jo(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=ml.reduce((r,a)=>(r[a]="function",r),t);return pn(e,n),e}function bl(e,t,n){if(n<ae)throw new Error("invalid exponent, negatives unsupported");if(n===ae)return e.ONE;if(n===te)return t;let r=e.ONE,a=t;for(;n>ae;)n&te&&(r=e.mul(r,a)),a=e.sqr(a),n>>=te;return r}function vn(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),a=t.reduce((o,i,c)=>e.is0(i)?o:(r[c]=o,e.mul(o,i)),e.ONE),s=e.inv(a);return t.reduceRight((o,i,c)=>e.is0(i)?o:(r[c]=e.mul(o,r[c]),e.mul(o,i)),s),r}function ns(e,t){const n=(e.ORDER-te)/_e,r=e.pow(t,n),a=e.eql(r,e.ONE),s=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!a&&!s&&!o)throw new Error("invalid Legendre symbol result");return a?1:s?0:-1}function hl(e,t){t!==void 0&&ji(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function xn(e,t,n=!1,r={}){if(e<=ae)throw new Error("invalid field: expected ORDER > 0, got "+e);let a,s;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=t;f.BITS&&(a=f.BITS),f.sqrt&&(s=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE)}else typeof t=="number"&&(a=t),r.sqrt&&(s=r.sqrt);const{nBitLength:o,nByteLength:i}=hl(e,a);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:i,MASK:ln(o),ZERO:ae,ONE:te,create:f=>K(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ae<=f&&f<e},is0:f=>f===ae,isValidNot0:f=>!u.is0(f)&&u.isValid(f),isOdd:f=>(f&te)===te,neg:f=>K(-f,e),eql:(f,d)=>f===d,sqr:f=>K(f*f,e),add:(f,d)=>K(f+d,e),sub:(f,d)=>K(f-d,e),mul:(f,d)=>K(f*d,e),pow:(f,d)=>bl(u,f,d),div:(f,d)=>K(f*ts(d,e),e),sqrN:f=>f*f,addN:(f,d)=>f+d,subN:(f,d)=>f-d,mulN:(f,d)=>f*d,inv:f=>ts(f,e),sqrt:s||(f=>(c||(c=yl(e)),c(u,f))),toBytes:f=>n?lo(f,i):$t(f,i),fromBytes:f=>{if(f.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+f.length);return n?fo(f):Ze(f)},invertBatch:f=>vn(u,f),cmov:(f,d,p)=>p?d:f});return Object.freeze(u)}function Qo(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ei(e){const t=Qo(e);return t+Math.ceil(t/2)}function gl(e,t,n=!1){const r=e.length,a=Qo(t),s=ei(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?fo(e):Ze(e),i=K(o,t-te)+te;return n?lo(i,a):$t(i,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ot=BigInt(0),De=BigInt(1);function yt(e,t){const n=t.negate();return e?n:t}function wl(e,t,n){const r=t==="pz"?o=>o.pz:o=>o.ez,a=vn(e.Fp,n.map(r));return n.map((o,i)=>o.toAffine(a[i])).map(e.fromAffine)}function ti(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Nn(e,t){ti(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),a=2**e,s=ln(e),o=BigInt(e);return{windows:n,windowSize:r,mask:s,maxNumber:a,shiftBy:o}}function rs(e,t,n){const{windowSize:r,mask:a,maxNumber:s,shiftBy:o}=n;let i=Number(e&a),c=e>>o;i>r&&(i-=s,c+=De);const u=t*r,f=u+Math.abs(i)-1,d=i===0,p=i<0,l=t%2!==0;return{nextN:c,offset:f,isZero:d,isNeg:p,isNegF:l,offsetF:u}}function vl(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function xl(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Gn=new WeakMap,ni=new WeakMap;function Rn(e){return ni.get(e)||1}function as(e){if(e!==ot)throw new Error("invalid wNAF")}function El(e,t){return{constTimeNegate:yt,hasPrecomputes(n){return Rn(n)!==1},unsafeLadder(n,r,a=e.ZERO){let s=n;for(;r>ot;)r&De&&(a=a.add(s)),s=s.double(),r>>=De;return a},precomputeWindow(n,r){const{windows:a,windowSize:s}=Nn(r,t),o=[];let i=n,c=i;for(let u=0;u<a;u++){c=i,o.push(c);for(let f=1;f<s;f++)c=c.add(i),o.push(c);i=c.double()}return o},wNAF(n,r,a){let s=e.ZERO,o=e.BASE;const i=Nn(n,t);for(let c=0;c<i.windows;c++){const{nextN:u,offset:f,isZero:d,isNeg:p,isNegF:l,offsetF:y}=rs(a,c,i);a=u,d?o=o.add(yt(l,r[y])):s=s.add(yt(p,r[f]))}return as(a),{p:s,f:o}},wNAFUnsafe(n,r,a,s=e.ZERO){const o=Nn(n,t);for(let i=0;i<o.windows&&a!==ot;i++){const{nextN:c,offset:u,isZero:f,isNeg:d}=rs(a,i,o);if(a=c,!f){const p=r[u];s=s.add(d?p.negate():p)}}return as(a),s},getPrecomputes(n,r,a){let s=Gn.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&(typeof a=="function"&&(s=a(s)),Gn.set(r,s))),s},wNAFCached(n,r,a){const s=Rn(n);return this.wNAF(s,this.getPrecomputes(s,n,a),r)},wNAFCachedUnsafe(n,r,a,s){const o=Rn(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,a),r,s)},setWindowSize(n,r){ti(r,t),ni.set(n,r),Gn.delete(n)}}}function Pl(e,t,n,r){let a=t,s=e.ZERO,o=e.ZERO;for(;n>ot||r>ot;)n&De&&(s=s.add(a)),r&De&&(o=o.add(a)),a=a.double(),n>>=De,r>>=De;return{p1:s,p2:o}}function Al(e,t,n,r){vl(n,e),xl(r,t);const a=n.length,s=r.length;if(a!==s)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,i=Uu(BigInt(a));let c=1;i>12?c=i-3:i>4?c=i-2:i>0&&(c=2);const u=ln(c),f=new Array(Number(u)+1).fill(o),d=Math.floor((t.BITS-1)/c)*c;let p=o;for(let l=d;l>=0;l-=c){f.fill(o);for(let m=0;m<s;m++){const b=r[m],g=Number(b>>BigInt(l)&u);f[g]=f[g].add(n[m])}let y=o;for(let m=f.length-1,b=o;m>0;m--)b=b.add(f[m]),y=y.add(b);if(p=p.add(y),l!==0)for(let m=0;m<c;m++)p=p.double()}return p}function ss(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Jo(t),t}else return xn(e)}function Bl(e,t,n={}){if(!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const i of["p","n","h"]){const c=t[i];if(!(typeof c=="bigint"&&c>ot))throw new Error(`CURVE.${i} must be positive bigint`)}const r=ss(t.p,n.Fp),a=ss(t.n,n.Fn),o=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const i of o)if(!r.isValid(t[i]))throw new Error(`CURVE.${i} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:a}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function os(e){e.lowS!==void 0&&Ft("lowS",e.lowS),e.prehash!==void 0&&Ft("prehash",e.prehash)}class Sl extends Error{constructor(t=""){super(t)}}const Pe={Err:Sl,_tlv:{encode:(e,t)=>{const{Err:n}=Pe;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,a=Ct(r);if(a.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Ct(a.length/2|128):"";return Ct(e)+s+a+t},decode(e,t){const{Err:n}=Pe;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const a=t[r++],s=!!(a&128);let o=0;if(!s)o=a;else{const c=a&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)o=o<<8|f;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const i=t.subarray(r,r+o);if(i.length!==o)throw new n("tlv.decode: wrong value length");return{v:i,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=Pe;if(e<ze)throw new t("integer: negative integers are not allowed");let n=Ct(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Pe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ze(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Pe,a=W("signature",e),{v:s,l:o}=r.decode(48,a);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:i,l:c}=r.decode(2,s),{v:u,l:f}=r.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(i),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Pe,r=t.encode(2,n.encode(e.r)),a=t.encode(2,n.encode(e.s)),s=r+a;return t.encode(48,s)}},ze=BigInt(0),X=BigInt(1),Ee=BigInt(2),et=BigInt(3),ir=BigInt(4);function Il(e,t,n){function r(a){const s=e.sqr(a),o=e.mul(s,a);return e.add(e.add(o,e.mul(a,t)),n)}return r}function ri(e,t,n){const{BYTES:r}=e;function a(s){let o;if(typeof s=="bigint")o=s;else{let i=W("private key",s);if(t){if(!t.includes(i.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(i,c.length-i.length),i=c}try{o=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof s}`)}}if(n&&(o=e.create(o)),!e.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return a}function $l(e,t={}){const{Fp:n,Fn:r}=Bl("weierstrass",e,t),{h:a,n:s}=e;pn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=t;if(o&&(!n.is0(e.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function i(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(A,h,k){const{x:v,y:B}=h.toAffine(),O=n.toBytes(v);if(Ft("isCompressed",k),k){i();const C=!n.isOdd(B);return J(ai(C),O)}else return J(Uint8Array.of(4),O,n.toBytes(B))}function u(A){Ne(A);const h=n.BYTES,k=h+1,v=2*h+1,B=A.length,O=A[0],C=A.subarray(1);if(B===k&&(O===2||O===3)){const N=n.fromBytes(C);if(!n.isValid(N))throw new Error("bad point: is not on curve, wrong x");const G=p(N);let _;try{_=n.sqrt(G)}catch(z){const F=z instanceof Error?": "+z.message:"";throw new Error("bad point: is not on curve, sqrt error"+F)}i();const E=n.isOdd(_);return(O&1)===1!==E&&(_=n.neg(_)),{x:N,y:_}}else if(B===v&&O===4){const N=n.fromBytes(C.subarray(h*0,h*1)),G=n.fromBytes(C.subarray(h*1,h*2));if(!l(N,G))throw new Error("bad point: is not on curve");return{x:N,y:G}}else throw new Error(`bad point: got length ${B}, expected compressed=${k} or uncompressed=${v}`)}const f=t.toBytes||c,d=t.fromBytes||u,p=Il(n,e.a,e.b);function l(A,h){const k=n.sqr(h),v=p(A);return n.eql(k,v)}if(!l(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const y=n.mul(n.pow(e.a,et),ir),m=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(y,m)))throw new Error("bad curve params: a or b");function b(A,h,k=!1){if(!n.isValid(h)||k&&n.is0(h))throw new Error(`bad point coordinate ${A}`);return h}function g(A){if(!(A instanceof I))throw new Error("ProjectivePoint expected")}const w=Va((A,h)=>{const{px:k,py:v,pz:B}=A;if(n.eql(B,n.ONE))return{x:k,y:v};const O=A.is0();h==null&&(h=O?n.ONE:n.inv(B));const C=n.mul(k,h),N=n.mul(v,h),G=n.mul(B,h);if(O)return{x:n.ZERO,y:n.ZERO};if(!n.eql(G,n.ONE))throw new Error("invZ was invalid");return{x:C,y:N}}),x=Va(A=>{if(A.is0()){if(t.allowInfinityPoint&&!n.is0(A.py))return;throw new Error("bad point: ZERO")}const{x:h,y:k}=A.toAffine();if(!n.isValid(h)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!l(h,k))throw new Error("bad point: equation left != right");if(!A.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function $(A,h,k,v,B){return k=new I(n.mul(k.px,A),k.py,k.pz),h=yt(v,h),k=yt(B,k),h.add(k)}class I{constructor(h,k,v){this.px=b("x",h),this.py=b("y",k,!0),this.pz=b("z",v),Object.freeze(this)}static fromAffine(h){const{x:k,y:v}=h||{};if(!h||!n.isValid(k)||!n.isValid(v))throw new Error("invalid affine point");if(h instanceof I)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(v)?I.ZERO:new I(k,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){return wl(I,"pz",h)}static fromBytes(h){return Ne(h),I.fromHex(h)}static fromHex(h){const k=I.fromAffine(d(W("pointHex",h)));return k.assertValidity(),k}static fromPrivateKey(h){const k=ri(r,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return I.BASE.multiply(k(h))}static msm(h,k){return Al(I,r,h,k)}precompute(h=8,k=!0){return S.setWindowSize(this,h),k||this.multiply(et),this}_setWindowSize(h){this.precompute(h)}assertValidity(){x(this)}hasEvenY(){const{y:h}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(h)}equals(h){g(h);const{px:k,py:v,pz:B}=this,{px:O,py:C,pz:N}=h,G=n.eql(n.mul(k,N),n.mul(O,B)),_=n.eql(n.mul(v,N),n.mul(C,B));return G&&_}negate(){return new I(this.px,n.neg(this.py),this.pz)}double(){const{a:h,b:k}=e,v=n.mul(k,et),{px:B,py:O,pz:C}=this;let N=n.ZERO,G=n.ZERO,_=n.ZERO,E=n.mul(B,B),M=n.mul(O,O),z=n.mul(C,C),F=n.mul(B,O);return F=n.add(F,F),_=n.mul(B,C),_=n.add(_,_),N=n.mul(h,_),G=n.mul(v,z),G=n.add(N,G),N=n.sub(M,G),G=n.add(M,G),G=n.mul(N,G),N=n.mul(F,N),_=n.mul(v,_),z=n.mul(h,z),F=n.sub(E,z),F=n.mul(h,F),F=n.add(F,_),_=n.add(E,E),E=n.add(_,E),E=n.add(E,z),E=n.mul(E,F),G=n.add(G,E),z=n.mul(O,C),z=n.add(z,z),E=n.mul(z,F),N=n.sub(N,E),_=n.mul(z,M),_=n.add(_,_),_=n.add(_,_),new I(N,G,_)}add(h){g(h);const{px:k,py:v,pz:B}=this,{px:O,py:C,pz:N}=h;let G=n.ZERO,_=n.ZERO,E=n.ZERO;const M=e.a,z=n.mul(e.b,et);let F=n.mul(k,O),q=n.mul(v,C),j=n.mul(B,N),Z=n.add(k,v),L=n.add(O,C);Z=n.mul(Z,L),L=n.add(F,q),Z=n.sub(Z,L),L=n.add(k,B);let U=n.add(O,N);return L=n.mul(L,U),U=n.add(F,j),L=n.sub(L,U),U=n.add(v,B),G=n.add(C,N),U=n.mul(U,G),G=n.add(q,j),U=n.sub(U,G),E=n.mul(M,L),G=n.mul(z,j),E=n.add(G,E),G=n.sub(q,E),E=n.add(q,E),_=n.mul(G,E),q=n.add(F,F),q=n.add(q,F),j=n.mul(M,j),L=n.mul(z,L),q=n.add(q,j),j=n.sub(F,j),j=n.mul(M,j),L=n.add(L,j),F=n.mul(q,L),_=n.add(_,F),F=n.mul(U,L),G=n.mul(Z,G),G=n.sub(G,F),F=n.mul(Z,q),E=n.mul(U,E),E=n.add(E,F),new I(G,_,E)}subtract(h){return this.add(h.negate())}is0(){return this.equals(I.ZERO)}multiply(h){const{endo:k}=t;if(!r.isValidNot0(h))throw new Error("invalid scalar: out of range");let v,B;const O=C=>S.wNAFCached(this,C,I.normalizeZ);if(k){const{k1neg:C,k1:N,k2neg:G,k2:_}=k.splitScalar(h),{p:E,f:M}=O(N),{p:z,f:F}=O(_);B=M.add(F),v=$(k.beta,E,z,C,G)}else{const{p:C,f:N}=O(h);v=C,B=N}return I.normalizeZ([v,B])[0]}multiplyUnsafe(h){const{endo:k}=t,v=this;if(!r.isValid(h))throw new Error("invalid scalar: out of range");if(h===ze||v.is0())return I.ZERO;if(h===X)return v;if(S.hasPrecomputes(this))return this.multiply(h);if(k){const{k1neg:B,k1:O,k2neg:C,k2:N}=k.splitScalar(h),{p1:G,p2:_}=Pl(I,v,O,N);return $(k.beta,G,_,B,C)}else return S.wNAFCachedUnsafe(v,h)}multiplyAndAddUnsafe(h,k,v){const B=this.multiplyUnsafe(k).add(h.multiplyUnsafe(v));return B.is0()?void 0:B}toAffine(h){return w(this,h)}isTorsionFree(){const{isTorsionFree:h}=t;return a===X?!0:h?h(I,this):S.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:h}=t;return a===X?this:h?h(I,this):this.multiplyUnsafe(a)}toBytes(h=!0){return Ft("isCompressed",h),this.assertValidity(),f(I,this,h)}toRawBytes(h=!0){return this.toBytes(h)}toHex(h=!0){return bt(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}I.BASE=new I(e.Gx,e.Gy,n.ONE),I.ZERO=new I(n.ZERO,n.ONE,n.ZERO),I.Fp=n,I.Fn=r;const D=r.BITS,S=El(I,t.endo?Math.ceil(D/2):D);return I}function ai(e){return Uint8Array.of(e?2:3)}function Ol(e,t,n={}){pn(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=t.randomBytes||xs,a=t.hmac||((v,...B)=>Ui(t.hash,v,J(...B))),{Fp:s,Fn:o}=e,{ORDER:i,BITS:c}=o;function u(v){const B=i>>X;return v>B}function f(v){return u(v)?o.neg(v):v}function d(v,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${v}: out of range 1..CURVE.n`)}class p{constructor(B,O,C){d("r",B),d("s",O),this.r=B,this.s=O,C!=null&&(this.recovery=C),Object.freeze(this)}static fromCompact(B){const O=o.BYTES,C=W("compactSignature",B,O*2);return new p(o.fromBytes(C.subarray(0,O)),o.fromBytes(C.subarray(O,O*2)))}static fromDER(B){const{r:O,s:C}=Pe.toSig(W("DER",B));return new p(O,C)}assertValidity(){}addRecoveryBit(B){return new p(this.r,this.s,B)}recoverPublicKey(B){const O=s.ORDER,{r:C,s:N,recovery:G}=this;if(G==null||![0,1,2,3].includes(G))throw new Error("recovery id invalid");if(i*Ee<O&&G>1)throw new Error("recovery id is ambiguous for h>1 curve");const E=G===2||G===3?C+i:C;if(!s.isValid(E))throw new Error("recovery id 2 or 3 invalid");const M=s.toBytes(E),z=e.fromHex(J(ai((G&1)===0),M)),F=o.inv(E),q=x(W("msgHash",B)),j=o.create(-q*F),Z=o.create(N*F),L=e.BASE.multiplyUnsafe(j).add(z.multiplyUnsafe(Z));if(L.is0())throw new Error("point at infinify");return L.assertValidity(),L}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return J(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return Gr(Pe.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bt(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bt(this.toBytes("compact"))}}const l=ri(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),y={isValidPrivateKey(v){try{return l(v),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const v=i;return gl(r(ei(v)),v)},precompute(v=8,B=e.BASE){return B.precompute(v,!1)}};function m(v,B=!0){return e.fromPrivateKey(v).toBytes(B)}function b(v){if(typeof v=="bigint")return!1;if(v instanceof e)return!0;const O=W("key",v).length,C=s.BYTES,N=C+1,G=2*C+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===N))return O===N||O===G}function g(v,B,O=!0){if(b(v)===!0)throw new Error("first arg must be private key");if(b(B)===!1)throw new Error("second arg must be public key");return e.fromHex(B).multiply(l(v)).toBytes(O)}const w=t.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const B=Ze(v),O=v.length*8-c;return O>0?B>>BigInt(O):B},x=t.bits2int_modN||function(v){return o.create(w(v))},$=ln(c);function I(v){return po("num < 2^"+c,v,ze,$),o.toBytes(v)}function D(v,B,O=S){if(["recovered","canonical"].some(Z=>Z in O))throw new Error("sign() legacy options not supported");const{hash:C}=t;let{lowS:N,prehash:G,extraEntropy:_}=O;N==null&&(N=!0),v=W("msgHash",v),os(O),G&&(v=W("prehashed msgHash",C(v)));const E=x(v),M=l(B),z=[I(M),I(E)];if(_!=null&&_!==!1){const Z=_===!0?r(s.BYTES):_;z.push(W("extraEntropy",Z))}const F=J(...z),q=E;function j(Z){const L=w(Z);if(!o.isValidNot0(L))return;const U=o.inv(L),ft=e.BASE.multiply(L).toAffine(),Ye=o.create(ft.x);if(Ye===ze)return;const Re=o.create(U*o.create(q+Ye*M));if(Re===ze)return;let An=(ft.x===Ye?0:2)|Number(ft.y&X),Xe=Re;return N&&u(Re)&&(Xe=f(Re),An^=1),new p(Ye,Xe,An)}return{seed:F,k2sig:j}}const S={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};function h(v,B,O=S){const{seed:C,k2sig:N}=D(v,B,O);return Vu(t.hash.outputLen,o.BYTES,a)(C,N)}e.BASE.precompute(8);function k(v,B,O,C=A){const N=v;B=W("msgHash",B),O=W("publicKey",O),os(C);const{lowS:G,prehash:_,format:E}=C;if("strict"in C)throw new Error("options.strict was renamed to lowS");if(E!==void 0&&!["compact","der","js"].includes(E))throw new Error('format must be "compact", "der" or "js"');const M=typeof N=="string"||Rr(N),z=!M&&!E&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!M&&!z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let F,q;try{if(z)if(E===void 0||E==="js")F=new p(N.r,N.s);else throw new Error("invalid format");if(M){try{E!=="compact"&&(F=p.fromDER(N))}catch(Xe){if(!(Xe instanceof Pe.Err))throw Xe}!F&&E!=="der"&&(F=p.fromCompact(N))}q=e.fromHex(O)}catch{return!1}if(!F||G&&F.hasHighS())return!1;_&&(B=t.hash(B));const{r:j,s:Z}=F,L=x(B),U=o.inv(Z),ft=o.create(L*U),Ye=o.create(j*U),Re=e.BASE.multiplyUnsafe(ft).add(q.multiplyUnsafe(Ye));return Re.is0()?!1:o.create(Re.x)===j}return Object.freeze({getPublicKey:m,getSharedSecret:g,sign:h,verify:k,utils:y,Point:e,Signature:p})}function kl(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=xn(t.n,e.nBitLength),a={Fp:n,Fn:r,allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:a}}function Tl(e){const{CURVE:t,curveOpts:n}=kl(e),r={hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,ecdsaOpts:r}}function Cl(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function Nl(e){const{CURVE:t,curveOpts:n,ecdsaOpts:r}=Tl(e),a=$l(t,n),s=Ol(a,r,n);return Cl(e,s)}function Gl(e,t){const n=e.ORDER;let r=ze;for(let y=n-X;y%Ee===ze;y/=Ee)r+=X;const a=r,s=Ee<<a-X-X,o=s*Ee,i=(n-X)/o,c=(i-X)/Ee,u=o-X,f=s,d=e.pow(t,i),p=e.pow(t,(i+X)/Ee);let l=(y,m)=>{let b=d,g=e.pow(m,u),w=e.sqr(g);w=e.mul(w,m);let x=e.mul(y,w);x=e.pow(x,c),x=e.mul(x,g),g=e.mul(x,m),w=e.mul(x,y);let $=e.mul(w,g);x=e.pow($,f);let I=e.eql(x,e.ONE);g=e.mul(w,p),x=e.mul($,b),w=e.cmov(g,w,I),$=e.cmov(x,$,I);for(let D=a;D>X;D--){let S=D-Ee;S=Ee<<S-X;let A=e.pow($,S);const h=e.eql(A,e.ONE);g=e.mul(w,b),b=e.mul(b,b),A=e.mul($,b),w=e.cmov(g,w,h),$=e.cmov(A,$,h)}return{isValid:I,value:w}};if(e.ORDER%ir===et){const y=(e.ORDER-et)/ir,m=e.sqrt(e.neg(t));l=(b,g)=>{let w=e.sqr(g);const x=e.mul(b,g);w=e.mul(w,x);let $=e.pow(w,y);$=e.mul($,x);const I=e.mul($,m),D=e.mul(e.sqr($),g),S=e.eql(D,b);let A=e.cmov(I,$,S);return{isValid:S,value:A}}}return l}function Rl(e,t){Jo(e);const{A:n,B:r,Z:a}=t;if(!e.isValid(n)||!e.isValid(r)||!e.isValid(a))throw new Error("mapToCurveSimpleSWU: invalid opts");const s=Gl(e,a);if(!e.isOdd)throw new Error("Field does not have .isOdd()");return o=>{let i,c,u,f,d,p,l,y;i=e.sqr(o),i=e.mul(i,a),c=e.sqr(i),c=e.add(c,i),u=e.add(c,e.ONE),u=e.mul(u,r),f=e.cmov(a,e.neg(c),!e.eql(c,e.ZERO)),f=e.mul(f,n),c=e.sqr(u),p=e.sqr(f),d=e.mul(p,n),c=e.add(c,d),c=e.mul(c,u),p=e.mul(p,f),d=e.mul(p,r),c=e.add(c,d),l=e.mul(i,u);const{isValid:m,value:b}=s(c,p);y=e.mul(i,o),y=e.mul(y,b),l=e.cmov(l,u,m),y=e.cmov(y,b,m);const g=e.isOdd(o)===e.isOdd(y);y=e.cmov(e.neg(y),y,g);const w=vn(e,[f],!0)[0];return l=e.mul(l,w),{x:l,y}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _l(e,t){const n=r=>Nl({...e,hash:r});return{...n(t),create:n}}const Dl=Ze;function Oe(e,t){if(vt(e),vt(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=e&255,e>>>=8;return new Uint8Array(n)}function Ml(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function vt(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Fl(e,t,n,r){Ne(e),Ne(t),vt(n),t.length>255&&(t=r(J(_r("H2C-OVERSIZE-DST-"),t)));const{outputLen:a,blockLen:s}=r,o=Math.ceil(n/a);if(n>65535||o>255)throw new Error("expand_message_xmd: invalid lenInBytes");const i=J(t,Oe(t.length,1)),c=Oe(0,s),u=Oe(n,2),f=new Array(o),d=r(J(c,e,u,Oe(0,1),i));f[0]=r(J(d,Oe(1,1),i));for(let l=1;l<=o;l++){const y=[Ml(d,f[l-1]),Oe(l+1,1),i];f[l]=r(J(...y))}return J(...f).slice(0,n)}function zl(e,t,n,r,a){if(Ne(e),Ne(t),vt(n),t.length>255){const s=Math.ceil(2*r/8);t=a.create({dkLen:s}).update(_r("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:n}).update(e).update(Oe(n,2)).update(t).update(Oe(t.length,1)).digest()}function is(e,t,n){pn(n,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:r,k:a,m:s,hash:o,expand:i,DST:c}=n;if(!Rr(c)&&typeof c!="string")throw new Error("DST must be string or uint8array");if(!Hu(n.hash))throw new Error("expected valid hash");Ne(e),vt(t);const u=typeof c=="string"?_r(c):c,f=r.toString(2).length,d=Math.ceil((f+a)/8),p=t*s*d;let l;if(i==="xmd")l=Fl(e,u,p,o);else if(i==="xof")l=zl(e,u,p,a,o);else if(i==="_internal_pass")l=e;else throw new Error('expand must be "xmd" or "xof"');const y=new Array(t);for(let m=0;m<t;m++){const b=new Array(s);for(let g=0;g<s;g++){const w=d*(g+m*s),x=l.subarray(w,w+d);b[g]=K(Dl(x),r)}y[m]=b}return y}function Ll(e,t){const n=t.map(r=>Array.from(r).reverse());return(r,a)=>{const[s,o,i,c]=n.map(d=>d.reduce((p,l)=>e.add(e.mul(p,r),l))),[u,f]=vn(e,[o,c],!0);return r=e.mul(s,u),a=e.mul(a,e.mul(i,f)),{x:r,y:a}}}function jl(e,t,n){if(typeof t!="function")throw new Error("mapToCurve() must be defined");function r(s){return e.fromAffine(t(s))}function a(s){const o=s.clearCofactor();return o.equals(e.ZERO)?e.ZERO:(o.assertValidity(),o)}return{defaults:n,hashToCurve(s,o){const i=n.DST?n.DST:{},c=Object.assign({},n,i,o),u=is(s,2,c),f=r(u[0]),d=r(u[1]);return a(f.add(d))},encodeToCurve(s,o){const i=n.encodeDST?n.encodeDST:{},c=Object.assign({},n,i,o),u=is(s,1,c);return a(r(u[0]))},mapToCurve(s){if(!Array.isArray(s))throw new Error("expected array of bigints");for(const o of s)if(typeof o!="bigint")throw new Error("expected array of bigints");return a(r(s))}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ie={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},si=BigInt(0),zt=BigInt(1),Lt=BigInt(2),cs=(e,t)=>(e+t/Lt)/t;function oi(e){const t=Ie.p,n=BigInt(3),r=BigInt(6),a=BigInt(11),s=BigInt(22),o=BigInt(23),i=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,d=oe(f,n,t)*f%t,p=oe(d,n,t)*f%t,l=oe(p,Lt,t)*u%t,y=oe(l,a,t)*l%t,m=oe(y,s,t)*y%t,b=oe(m,i,t)*m%t,g=oe(b,c,t)*b%t,w=oe(g,i,t)*m%t,x=oe(w,n,t)*f%t,$=oe(x,o,t)*y%t,I=oe($,r,t)*u%t,D=oe(I,Lt,t);if(!Ge.eql(Ge.sqr(D),e))throw new Error("Cannot find square root");return D}const Ge=xn(Ie.p,void 0,void 0,{sqrt:oi}),Ke=_l({...Ie,Fp:Ge,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ie.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-zt*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),i=cs(s*e,t),c=cs(-r*e,t);let u=K(e-i*n-c*a,t),f=K(-i*r-c*s,t);const d=u>o,p=f>o;if(d&&(u=t-u),p&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:p,k2:f}}}},ht),us={};function jt(e,...t){let n=us[e];if(n===void 0){const r=ht(Uint8Array.from(e,a=>a.charCodeAt(0)));n=J(r,r),us[e]=n}return ht(J(n,...t))}const la=e=>e.toBytes(!0).slice(1),cr=e=>$t(e,32),_n=e=>K(e,Ie.p),xt=e=>K(e,Ie.n),pa=(()=>Ke.Point)(),ya=e=>e%Lt===si;function ur(e){let t=Ke.utils.normPrivateKeyToScalar(e),n=pa.fromPrivateKey(t);return{scalar:ya(n.y)?t:xt(-t),bytes:la(n)}}function ii(e){po("x",e,zt,Ie.p);const t=_n(e*e),n=_n(t*e+BigInt(7));let r=oi(n);ya(r)||(r=_n(-r));const a=pa.fromAffine({x:e,y:r});return a.assertValidity(),a}const nt=Ze;function ci(...e){return xt(nt(jt("BIP0340/challenge",...e)))}function Ul(e){return ur(e).bytes}function Vl(e,t,n=xs(32)){const r=W("message",e),{bytes:a,scalar:s}=ur(t),o=W("auxRand",n,32),i=cr(s^nt(jt("BIP0340/aux",o))),c=jt("BIP0340/nonce",i,a,r),u=xt(nt(c));if(u===si)throw new Error("sign failed: k is zero");const{bytes:f,scalar:d}=ur(u),p=ci(f,a,r),l=new Uint8Array(64);if(l.set(f,0),l.set(cr(xt(d+p*s)),32),!ui(l,r,a))throw new Error("sign: Invalid signature produced");return l}function ui(e,t,n){const r=W("signature",e,64),a=W("message",t),s=W("publicKey",n,32);try{const o=ii(nt(s)),i=nt(r.subarray(0,32));if(!Qn(i,zt,Ie.p))return!1;const c=nt(r.subarray(32,64));if(!Qn(c,zt,Ie.n))return!1;const u=ci(cr(i),la(o),a),f=pa.BASE.multiplyUnsafe(c).add(o.multiplyUnsafe(xt(-u))),{x:d,y:p}=f.toAffine();return!(f.is0()||!ya(p)||d!==i)}catch{return!1}}const Hl=(()=>({getPublicKey:Ul,sign:Vl,verify:ui,utils:{randomPrivateKey:Ke.utils.randomPrivateKey,lift_x:ii,pointToBytes:la,numberToBytesBE:$t,bytesToNumberBE:Ze,taggedHash:jt,mod:K}}))(),ql=(()=>Ll(Ge,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(t=>BigInt(t)))))(),Zl=(()=>Rl(Ge,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Ge.create(BigInt("-11"))}))(),ma=(()=>jl(Ke.Point,e=>{const{x:t,y:n}=Zl(Ge.create(e[0]));return ql(t,n)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Ge.ORDER,m:1,k:128,expand:"xmd",hash:ht}))(),Wl=(()=>ma.hashToCurve)(),Kl=(()=>ma.encodeToCurve)(),Yl=Object.freeze(Object.defineProperty({__proto__:null,encodeToCurve:Kl,hashToCurve:Wl,schnorr:Hl,secp256k1:Ke,secp256k1_hasher:ma},Symbol.toStringTag,{value:"Module"}));function Xl({r:e,s:t,to:n="hex",v:r,yParity:a}){const s=(()=>{if(a===0||a===1)return a;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new Ke.Signature(ne(e),ne(t)).toCompactHex()}${s===0?"1b":"1c"}`;return n==="hex"?o:en(o)}async function ba(e,t){var d,p,l;const{address:n,factory:r,factoryData:a,hash:s,signature:o,universalSignatureVerifierAddress:i=(l=(p=(d=e.chain)==null?void 0:d.contracts)==null?void 0:p.universalSignatureVerifier)==null?void 0:l.address,...c}=t,u=(()=>mt(o)?o:typeof o=="object"&&"r"in o&&"s"in o?Xl(o):ce(o))(),f=await(async()=>!r&&!a||qd(u)?u:Rt({address:r,data:a,signature:u}))();try{const y=i?{to:i,data:me({abi:La,functionName:"isValidSig",args:[n,s,f]}),...c}:{data:Zr({abi:La,args:[n,s,f],bytecode:gf}),...c},{data:m}=await R(e,yn,"call")(y);return Vi(m??"0x0")}catch(y){try{if(bn(Hi(n),await eo({hash:s,signature:o})))return!0}catch{}if(y instanceof Ys)return!1;throw y}}async function Jl(e,{address:t,message:n,factory:r,factoryData:a,signature:s,...o}){const i=Ho(n);return ba(e,{address:t,factory:r,factoryData:a,hash:i,signature:s,...o})}async function Ql(e,t){const{address:n,factory:r,factoryData:a,signature:s,message:o,primaryType:i,types:c,domain:u,...f}=t,d=Fo({message:o,primaryType:i,types:c,domain:u});return ba(e,{address:n,factory:r,factoryData:a,hash:d,signature:s,...f})}function e0(e,t){const{abi:n,address:r,args:a,batch:s=!0,eventName:o,fromBlock:i,onError:c,onLogs:u,poll:f,pollingInterval:d=e.pollingInterval,strict:p}=t;return(()=>typeof f<"u"?f:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))()?(()=>{const b=p??!1,g=fe(["watchContractEvent",r,a,s,e.uid,o,d,b,i]);return ve(g,{onLogs:u,onError:c},w=>{let x;i!==void 0&&(x=i-1n);let $,I=!1;const D=We(async()=>{var S;if(!I){try{$=await R(e,So,"createContractEventFilter")({abi:n,address:r,args:a,eventName:o,strict:b,fromBlock:i})}catch{}I=!0;return}try{let A;if($)A=await R(e,hn,"getFilterChanges")({filter:$});else{const h=await R(e,kt,"getBlockNumber")({});x&&x<h?A=await R(e,Oo,"getContractEvents")({abi:n,address:r,args:a,eventName:o,fromBlock:x+1n,toBlock:h,strict:b}):A=[],x=h}if(A.length===0)return;if(s)w.onLogs(A);else for(const h of A)w.onLogs([h])}catch(A){$&&A instanceof ws&&(I=!1),(S=w.onError)==null||S.call(w,A)}},{emitOnBegin:!0,interval:d});return async()=>{$&&await R(e,wn,"uninstallFilter")({filter:$}),D()}})})():(()=>{const b=p??!1,g=fe(["watchContractEvent",r,a,s,e.uid,o,d,b]);let w=!0,x=()=>w=!1;return ve(g,{onLogs:u,onError:c},$=>((async()=>{try{const I=(()=>{if(e.transport.type==="fallback"){const A=e.transport.transports.find(h=>h.config.type==="webSocket"||h.config.type==="ipc");return A?A.value:e.transport}return e.transport})(),D=o?Ot({abi:n,eventName:o,args:a}):[],{unsubscribe:S}=await I.subscribe({params:["logs",{address:r,topics:D}],onData(A){var k;if(!w)return;const h=A.result;try{const{eventName:v,args:B}=oa({abi:n,data:h.data,topics:h.topics,strict:p}),O=Se(h,{args:B,eventName:v});$.onLogs([O])}catch(v){let B,O;if(v instanceof gt||v instanceof on){if(p)return;B=v.abiItem.name,O=(k=v.abiItem.inputs)==null?void 0:k.some(N=>!("name"in N&&N.name))}const C=Se(h,{args:O?[]:{},eventName:B});$.onLogs([C])}},onError(A){var h;(h=$.onError)==null||h.call($,A)}});x=S,w||x()}catch(I){c==null||c(I)}})(),()=>x()))})()}function t0(e){var d,p,l;const{scheme:t,statement:n,...r}=((d=e.match(n0))==null?void 0:d.groups)??{},{chainId:a,expirationTime:s,issuedAt:o,notBefore:i,requestId:c,...u}=((p=e.match(r0))==null?void 0:p.groups)??{},f=(l=e.split("Resources:")[1])==null?void 0:l.split(`
- `).slice(1);return{...r,...u,...a?{chainId:Number(a)}:{},...s?{expirationTime:new Date(s)}:{},...o?{issuedAt:new Date(o)}:{},...i?{notBefore:new Date(i)}:{},...c?{requestId:c}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const n0=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,r0=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function a0(e){const{address:t,domain:n,message:r,nonce:a,scheme:s,time:o=new Date}=e;if(n&&r.domain!==n||a&&r.nonce!==a||s&&r.scheme!==s||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!ue(r.address,{strict:!1})||t&&!bn(r.address,t))return!1}catch{return!1}return!0}async function s0(e,t){const{address:n,domain:r,message:a,nonce:s,scheme:o,signature:i,time:c=new Date,...u}=t,f=t0(a);if(!f.address||!a0({address:n,domain:r,message:f,nonce:s,scheme:o,time:c}))return!1;const p=Ho(a);return ba(e,{address:f.address,hash:p,signature:i,...u})}function o0(e){return{call:t=>yn(e,t),createAccessList:t=>Bo(e,t),createBlockFilter:()=>zf(e),createContractEventFilter:t=>So(e,t),createEventFilter:t=>Io(e,t),createPendingTransactionFilter:()=>$o(e),estimateContractGas:t=>jf(e,t),estimateGas:t=>Yr(e,t),getBalance:t=>ao(e,t),getBlobBaseFee:()=>Uf(e),getBlock:t=>he(e,t),getBlockNumber:t=>kt(e,t),getBlockTransactionCount:t=>Kf(e,t),getBytecode:t=>er(e,t),getChainId:()=>It(e),getCode:t=>er(e,t),getContractEvents:t=>Oo(e,t),getEip712Domain:t=>Qf(e,t),getEnsAddress:t=>Af(e,t),getEnsAvatar:t=>Df(e,t),getEnsName:t=>Mf(e,t),getEnsResolver:t=>Ff(e,t),getEnsText:t=>Ao(e,t),getFeeHistory:t=>nd(e,t),estimateFeesPerGas:t=>ro(e,t),getFilterChanges:t=>hn(e,t),getFilterLogs:t=>rd(e,t),getGasPrice:()=>Kr(e),getLogs:t=>ca(e,t),getProof:t=>il(e,t),estimateMaxPriorityFeePerGas:t=>$u(e,t),getStorageAt:t=>ad(e,t),getTransaction:t=>ua(e,t),getTransactionConfirmations:t=>sd(e,t),getTransactionCount:t=>Xr(e,t),getTransactionReceipt:t=>Gt(e,t),multicall:t=>od(e,t),prepareTransactionRequest:t=>so(e,t),readContract:t=>we(e,t),sendRawTransaction:t=>Nu(e,t),simulate:t=>tr(e,t),simulateBlocks:t=>tr(e,t),simulateCalls:t=>Kd(e,t),simulateContract:t=>fl(e,t),verifyMessage:t=>Jl(e,t),verifySiweMessage:t=>s0(e,t),verifyTypedData:t=>Ql(e,t),uninstallFilter:t=>wn(e,t),waitForTransactionReceipt:t=>cl(e,t),watchBlocks:t=>Xd(e,t),watchBlockNumber:t=>Zo(e,t),watchContractEvent:t=>e0(e,t),watchEvent:t=>Jd(e,t),watchPendingTransactions:t=>Qd(e,t)}}function j0(e){const{key:t="public",name:n="Public Client"}=e;return Es({...e,key:t,name:n,type:"publicClient"}).extend(o0)}function U0(e){const{r:t,s:n}=Ke.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[a,s]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:T(t,{size:32}),s:T(n,{size:32}),v:a,yParity:s}:{r:T(t,{size:32}),s:T(n,{size:32}),yParity:s}}const V0=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function fi(e){const{authorization:t,factory:n,factoryData:r}=e;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";const a=t.address;return Y([a,r??"0x"])}return n?Y([n,r??"0x"]):"0x"}function di(e){const{callGasLimit:t,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:a,paymaster:s,paymasterData:o,paymasterPostOpGasLimit:i,paymasterVerificationGasLimit:c,sender:u,signature:f="0x",verificationGasLimit:d}=e,p=Y([ie(T(d||0n),{size:16}),ie(T(t||0n),{size:16})]),l=fi(e),y=Y([ie(T(r||0n),{size:16}),ie(T(a||0n),{size:16})]),m=e.nonce??0n,b=s?Y([s,ie(T(c||0n),{size:16}),ie(T(i||0n),{size:16}),o||"0x"]):"0x",g=e.preVerificationGas??0n;return{accountGasLimits:p,callData:n,initCode:l,gasFees:y,nonce:m,paymasterAndData:b,preVerificationGas:g,sender:u,signature:f}}const i0={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function c0(e){const{chainId:t,entryPointAddress:n,userOperation:r}=e,a=di(r);return{types:i0,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:a}}function H0(e){const{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,a=e.userOperation,{authorization:s,callData:o="0x",callGasLimit:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,paymasterAndData:d="0x",preVerificationGas:p,sender:l,verificationGasLimit:y}=a;if(r==="0.8")return Fo(c0({chainId:t,entryPointAddress:n,userOperation:a}));const m=(()=>{var b,g;if(r==="0.6"){const w=(b=a.initCode)==null?void 0:b.slice(0,42),x=(g=a.initCode)==null?void 0:g.slice(42),$=fi({authorization:s,factory:w,factoryData:x});return pe([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[l,f,V($),V(o),i,y,p,c,u,V(d)])}if(r==="0.7"){const w=di(a);return pe([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[w.sender,w.nonce,V(w.initCode),V(w.callData),w.accountGasLimits,w.preVerificationGas,w.gasFees,V(w.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return V(pe([{type:"bytes32"},{type:"address"},{type:"uint256"}],[V(m),n,BigInt(t)]))}async function q0(e){const{extend:t,nonceKeyManager:n=Zd({source:{get(){return Date.now()},set(){}}}),...r}=e;let a=!1;const s=await e.getAddress();return{...t,...r,address:s,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(o){const i=(o==null?void 0:o.key)??BigInt(await n.consume({address:s,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...o,key:i}):await we(e.client,{abi:zr(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[s,i]})},async isDeployed(){return a?!0:(a=!!await R(e.client,er,"getCode")({address:s}),a)},...e.sign?{async sign(o){const[{factory:i,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.sign(o)]);return i&&c?Rt({address:i,data:c,signature:u}):u}}:{},async signMessage(o){const[{factory:i,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signMessage(o)]);return i&&c&&i!=="0x7702"?Rt({address:i,data:c,signature:u}):u},async signTypedData(o){const[{factory:i,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signTypedData(o)]);return i&&c&&i!=="0x7702"?Rt({address:i,data:c,signature:u}):u},type:"smart"}}class fr extends P{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(fr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class it extends P{constructor({cause:t,data:n,message:r}={}){var s;const a=(s=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${a?`with reason: ${a}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}}Object.defineProperty(it,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(it,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class dr extends P{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(dr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class lr extends P{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(lr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class pr extends P{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(pr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class yr extends P{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(yr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class mr extends P{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(mr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class br extends P{constructor({cause:t,factory:n,factoryData:r,initCode:a,sender:s}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`,s&&`sender: ${s}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(br,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class hr extends P{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(hr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class gr extends P{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}}Object.defineProperty(gr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class wr extends P{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}}Object.defineProperty(wr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class vr extends P{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(vr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class xr extends P{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}}Object.defineProperty(xr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class Ut extends P{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}}Object.defineProperty(Ut,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Er extends P{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Er,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class Me extends P{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(Me,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(Me,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class Pr extends P{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(Pr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Ar extends P{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Ar,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class Vt extends P{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}}Object.defineProperty(Vt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class Ht extends P{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(Ht,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class Br extends P{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(Br,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class Sr extends P{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(Sr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class qt extends P{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}}Object.defineProperty(qt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class Ir extends P{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(Ir,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class Zt extends P{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(Zt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class $r extends P{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty($r,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class Or extends P{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(Or,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class kr extends P{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(kr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class Tr extends P{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(Tr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class Wt extends P{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(Wt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class Kt extends P{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(Kt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class Yt extends P{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(Yt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class Xt extends P{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(Xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class u0 extends P{constructor({cause:t}){super(`An error occurred while executing user operation: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}}class Cr extends P{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(Cr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class Nr extends P{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(Nr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class f0 extends P{constructor(t,{callData:n,callGasLimit:r,docsPath:a,factory:s,factoryData:o,initCode:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:f,paymaster:d,paymasterAndData:p,paymasterData:l,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:m,preVerificationGas:b,sender:g,signature:w,verificationGasLimit:x}){const $=tn({callData:n,callGasLimit:r,factory:s,factoryData:o,initCode:i,maxFeePerGas:typeof c<"u"&&`${Ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ae(u)} gwei`,nonce:f,paymaster:d,paymasterAndData:p,paymasterData:l,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:m,preVerificationGas:b,sender:g,signature:w,verificationGasLimit:x});super(t.shortMessage,{cause:t,docsPath:a,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",$].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class d0 extends P{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class l0 extends P{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}}class fs extends P{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const p0=[it,Ut,Me,Vt,Ht,qt,Zt,Xt,Wt,Kt,Yt];function y0(e,t){const n=(e.details||"").toLowerCase();if(fr.message.test(n))return new fr({cause:e});if(dr.message.test(n))return new dr({cause:e});if(lr.message.test(n))return new lr({cause:e});if(pr.message.test(n))return new pr({cause:e});if(yr.message.test(n))return new yr({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(mr.message.test(n))return new mr({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(br.message.test(n))return new br({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(hr.message.test(n))return new hr({cause:e});if(gr.message.test(n))return new gr({cause:e});if(vr.message.test(n))return new vr({cause:e,nonce:t.nonce});if(wr.message.test(n))return new wr({cause:e});if(xr.message.test(n))return new xr({cause:e});if(Er.message.test(n))return new Er({cause:e});if(Me.message.test(n))return new Me({cause:e});if(Pr.message.test(n))return new Pr({cause:e});if(Ar.message.test(n))return new Ar({cause:e});if(Br.message.test(n))return new Br({cause:e});if(Ir.message.test(n))return new Ir({cause:e});if(Sr.message.test(n))return new Sr({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if($r.message.test(n))return new $r({cause:e});if(Or.message.test(n))return new Or({cause:e});if(Tr.message.test(n))return new Tr({cause:e});if(kr.message.test(n))return new kr({cause:e});if(Cr.message.test(n))return new Cr({cause:e});if(Nr.message.test(n))return new Nr({cause:e});const r=e.walk(a=>p0.some(s=>s.code===a.code));if(r){if(r.code===it.code)return new it({cause:e,data:r.data,message:r.details});if(r.code===Ut.code)return new Ut({cause:e});if(r.code===Me.code)return new Me({cause:e});if(r.code===Vt.code)return new Vt({cause:e});if(r.code===Ht.code)return new Ht({cause:e});if(r.code===qt.code)return new qt({cause:e});if(r.code===Zt.code)return new Zt({cause:e});if(r.code===Xt.code)return new Xt({cause:e});if(r.code===Wt.code)return new Wt({cause:e});if(r.code===Kt.code)return new Kt({cause:e});if(r.code===Yt.code)return new Yt({cause:e})}return new u0({cause:e})}function li(e,{calls:t,docsPath:n,...r}){const a=(()=>{const s=y0(e,r);if(t&&s instanceof it){const o=m0(s),i=t==null?void 0:t.filter(c=>c.abi);if(o&&i.length>0)return b0({calls:i,revertData:o})}return s})();return new f0(a,{docsPath:n,...r})}function m0(e){let t;return e.walk(n=>{var a,s,o,i;const r=n;if(typeof r.data=="string"||typeof((a=r.data)==null?void 0:a.revertData)=="string"||!(r instanceof P)&&typeof r.message=="string"){const c=(i=(o=((s=r.data)==null?void 0:s.revertData)||r.data||r.message).match)==null?void 0:i.call(o,/(0x[A-Za-z0-9]*)/);if(c)return t=c[1],!0}return!1}),t}function b0(e){const{calls:t,revertData:n}=e,{abi:r,functionName:a,args:s,to:o}=(()=>{const c=t==null?void 0:t.filter(f=>!!f.abi);if(c.length===1)return c[0];const u=c.filter(f=>{try{return!!Zs({abi:f.abi,data:n})}catch{return!1}});return u.length===1?u[0]:{abi:[],functionName:c.reduce((f,d)=>`${f?`${f} | `:""}${d.functionName}`,""),args:void 0,to:void 0}})(),i=(()=>n==="0x"?new Js({functionName:a}):new Mt({abi:r,data:n,functionName:a}))();return new Xs(i,{abi:r,args:s,contractAddress:o,functionName:a})}function h0(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function En(e){const t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=T(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=T(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=T(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=T(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=T(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=T(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=T(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=T(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=g0(e.authorization)),t}function g0(e){return{address:e.address,chainId:T(e.chainId),nonce:T(e.nonce),r:e.r?T(BigInt(e.r),{size:32}):ie("0x",{size:32}),s:e.s?T(BigInt(e.s),{size:32}):ie("0x",{size:32}),yParity:e.yParity?T(e.yParity,{size:1}):ie("0x",{size:32})}}async function w0(e,t){const{chainId:n,entryPointAddress:r,context:a,...s}=t,o=En(s),{paymasterPostOpGasLimit:i,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},r,T(n),a]});return{...u,...i&&{paymasterPostOpGasLimit:ne(i)},...c&&{paymasterVerificationGasLimit:ne(c)}}}async function v0(e,t){const{chainId:n,entryPointAddress:r,context:a,...s}=t,o=En(s),{paymasterPostOpGasLimit:i,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...o,callGasLimit:o.callGasLimit??"0x0",verificationGasLimit:o.verificationGasLimit??"0x0",preVerificationGas:o.preVerificationGas??"0x0"},r,T(n),a]});return{...u,...i&&{paymasterPostOpGasLimit:ne(i)},...c&&{paymasterVerificationGasLimit:ne(c)}}}const x0=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function ha(e,t){var D;const n=t,{account:r=e.account,parameters:a=x0,stateOverride:s}=n;if(!r)throw new an;const o=re(r),i=e,c=n.paymaster??(i==null?void 0:i.paymaster),u=typeof c=="string"?c:void 0,{getPaymasterStubData:f,getPaymasterData:d}=(()=>{if(c===!0)return{getPaymasterStubData:S=>R(i,v0,"getPaymasterStubData")(S),getPaymasterData:S=>R(i,w0,"getPaymasterData")(S)};if(typeof c=="object"){const{getPaymasterStubData:S,getPaymasterData:A}=c;return{getPaymasterStubData:A&&S?S:A,getPaymasterData:A&&S?A:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),p=n.paymasterContext?n.paymasterContext:i==null?void 0:i.paymasterContext;let l={...n,paymaster:u,sender:o.address};const[y,m,b,g,w]=await Promise.all([(async()=>n.calls?o.encodeCalls(n.calls.map(S=>{const A=S;return A.abi?{data:me(A),to:A.to,value:A.value}:A})):n.callData)(),(async()=>{if(!a.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:S,factoryData:A}=await o.getFactoryArgs();return o.entryPoint.version==="0.6"?{initCode:S&&A?Y([S,A]):void 0}:{factory:S,factoryData:A}})(),(async()=>{var S;if(a.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return l;if((S=i==null?void 0:i.userOperation)!=null&&S.estimateFeesPerGas){const A=await i.userOperation.estimateFeesPerGas({account:o,bundlerClient:i,userOperation:l});return{...l,...A}}try{const A=i.client??e,h=await R(A,ro,"estimateFeesPerGas")({chain:A.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*h.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*h.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(a.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:o.getNonce()})(),(async()=>{if(a.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(o.authorization&&!await o.isDeployed())return{...await ul(o.client,o.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof y<"u"&&(l.callData=y),typeof m<"u"&&(l={...l,...m}),typeof b<"u"&&(l={...l,...b}),typeof g<"u"&&(l.nonce=g),typeof w<"u"&&(l.authorization=w),a.includes("signature")&&(typeof n.signature<"u"?l.signature=n.signature:l.signature=await o.getStubSignature(l)),o.entryPoint.version==="0.6"&&!l.initCode&&(l.initCode="0x");let x;async function $(){return x||(e.chain?e.chain.id:(x=await R(e,It,"getChainId")({}),x))}let I=!1;if(a.includes("paymaster")&&f&&!u&&!n.paymasterAndData){const{isFinal:S=!1,sponsor:A,...h}=await f({chainId:await $(),entryPointAddress:o.entryPoint.address,context:p,...l});I=S,l={...l,...h}}if(o.entryPoint.version==="0.6"&&!l.paymasterAndData&&(l.paymasterAndData="0x"),a.includes("gas")){if((D=o.userOperation)!=null&&D.estimateGas){const S=await o.userOperation.estimateGas(l);l={...l,...S}}if(typeof l.callGasLimit>"u"||typeof l.preVerificationGas>"u"||typeof l.verificationGasLimit>"u"||l.paymaster&&typeof l.paymasterPostOpGasLimit>"u"||l.paymaster&&typeof l.paymasterVerificationGasLimit>"u"){const S=await R(i,pi,"estimateUserOperationGas")({account:o,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:s,...l.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...l});l={...l,callGasLimit:l.callGasLimit??S.callGasLimit,preVerificationGas:l.preVerificationGas??S.preVerificationGas,verificationGasLimit:l.verificationGasLimit??S.verificationGasLimit,paymasterPostOpGasLimit:l.paymasterPostOpGasLimit??S.paymasterPostOpGasLimit,paymasterVerificationGasLimit:l.paymasterVerificationGasLimit??S.paymasterVerificationGasLimit}}}if(a.includes("paymaster")&&d&&!u&&!n.paymasterAndData&&!I){const S=await d({chainId:await $(),entryPointAddress:o.entryPoint.address,context:p,...l});l={...l,...S}}return delete l.calls,delete l.parameters,delete l.paymasterContext,typeof l.paymaster!="string"&&delete l.paymaster,l}async function pi(e,t){var c;const{account:n=e.account,entryPointAddress:r,stateOverride:a}=t;if(!n&&!t.sender)throw new an;const s=n?re(n):void 0,o=fn(a),i=s?await R(e,ha,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{const u=[En(i),r??((c=s==null?void 0:s.entryPoint)==null?void 0:c.address)],f=await e.request({method:"eth_estimateUserOperationGas",params:o?[...u,o]:[...u]});return h0(f)}catch(u){const f=t.calls;throw li(u,{...i,...f?{calls:f}:{}})}}function E0(e){return e.request({method:"eth_supportedEntryPoints"})}function P0(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function A0(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new l0({hash:t});const{blockHash:r,blockNumber:a,entryPoint:s,transactionHash:o,userOperation:i}=n;return{blockHash:r,blockNumber:BigInt(a),entryPoint:s,transactionHash:o,userOperation:P0(i)}}function B0(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>Se(n))),e.receipt&&(t.receipt=gs(t.receipt)),t}async function yi(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new d0({hash:t});return B0(n)}async function S0(e,t){var c,u;const{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new an;const a=n?re(n):void 0,s=a?await R(e,ha,"prepareUserOperation")(t):t,o=t.signature||await((c=a==null?void 0:a.signUserOperation)==null?void 0:c.call(a,s)),i=En({...s,signature:o});try{return await e.request({method:"eth_sendUserOperation",params:[i,r??((u=a==null?void 0:a.entryPoint)==null?void 0:u.address)]},{retryCount:0})}catch(f){const d=t.calls;throw li(f,{...s,...d?{calls:d}:{},signature:o})}}function I0(e,t){const{hash:n,pollingInterval:r=e.pollingInterval,retryCount:a,timeout:s=12e4}=t;let o=0;const i=fe(["waitForUserOperationReceipt",e.uid,n]);return new Promise((c,u)=>{const f=ve(i,{resolve:c,reject:u},d=>{const p=y=>{l(),y(),f()},l=We(async()=>{a&&o>=a&&p(()=>d.reject(new fs({hash:n})));try{const y=await R(e,yi,"getUserOperationReceipt")({hash:n});p(()=>d.resolve(y))}catch(y){const m=y;m.name!=="UserOperationReceiptNotFoundError"&&p(()=>d.reject(m))}o++},{emitOnBegin:!0,interval:r});return s&&setTimeout(()=>p(()=>d.reject(new fs({hash:n}))),s),l})})}function $0(e){return{estimateUserOperationGas:t=>pi(e,t),getChainId:()=>It(e),getSupportedEntryPoints:()=>E0(e),getUserOperation:t=>A0(e,t),getUserOperationReceipt:t=>yi(e,t),prepareUserOperation:t=>ha(e,t),sendUserOperation:t=>S0(e,t),waitForUserOperationReceipt:t=>I0(e,t)}}function Z0(e){const{client:t,key:n="bundler",name:r="Bundler Client",paymaster:a,paymasterContext:s,transport:o,userOperation:i}=e;return Object.assign(Es({...e,chain:e.chain??(t==null?void 0:t.chain),key:n,name:r,transport:o,type:"bundlerClient"}),{client:t,paymaster:a,paymasterContext:s,userOperation:i}).extend($0)}const W0="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mi={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},bi={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},hi={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},O0=Dr(mi.p),k0=Dr(bi.p),T0=Dr(hi.p),C0=Mr({...mi,Fp:O0,lowS:!1},ht);Mr({...bi,Fp:k0,lowS:!1},qi);Mr({...hi,Fp:T0,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Zi);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const K0=C0;function Pn(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function N0(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Pn(n);return(a,s)=>r.then(o=>s(o.transaction(t,a).objectStore(t)))}let Dn;function ga(){return Dn||(Dn=N0("keyval-store","keyval")),Dn}function Y0(e,t=ga()){return t("readonly",n=>Pn(n.get(e)))}function X0(e,t,n=ga()){return n("readwrite",r=>(r.put(t,e),Pn(r.transaction)))}function J0(e,t=ga()){return t("readwrite",n=>(n.delete(e),Pn(n.transaction)))}export{Qr as A,Mu as B,yn as C,Z0 as a,N0 as b,j0 as c,J0 as d,Fo as e,_u as f,Y0 as g,Ho as h,me as i,H0 as j,pe as k,U0 as l,z0 as m,V0 as n,W0 as o,K0 as p,er as q,we as r,X0 as s,q0 as t,Bt as u,D0 as v,L0 as w,bn as x,oa as y,Zs as z};
